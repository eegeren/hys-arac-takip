(()=>{var e={};e.id=778,e.ids=[778],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4009:(e,t,l)=>{"use strict";l.r(t),l.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),l(5502),l(1506),l(5866);var a=l(3191),s=l(8716),r=l(7922),i=l.n(r),n=l(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);l.d(t,d);let o=["",{children:["vehicles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,5502)),"/Users/yusufegeeren/Desktop/hys-fleet/web/app/vehicles/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,1506)),"/Users/yusufegeeren/Desktop/hys-fleet/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/yusufegeeren/Desktop/hys-fleet/web/app/vehicles/page.tsx"],u="/vehicles/page",x={require:l,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/vehicles/page",pathname:"/vehicles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2106:()=>{},429:(e,t,l)=>{Promise.resolve().then(l.bind(l,9599))},2828:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,2994,23)),Promise.resolve().then(l.t.bind(l,6114,23)),Promise.resolve().then(l.t.bind(l,9727,23)),Promise.resolve().then(l.t.bind(l,9671,23)),Promise.resolve().then(l.t.bind(l,1868,23)),Promise.resolve().then(l.t.bind(l,4759,23))},9599:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ee});var a=l(326),s=l(6824),r=l(7577);l(4095);let i=()=>{},n=i(),d=Object,o=e=>e===n,c=e=>"function"==typeof e,u=(e,t)=>({...e,...t}),x=e=>c(e.then),m=new WeakMap,p=0,b=e=>{let t,l;let a=typeof e,s=e&&e.constructor,r=s==Date;if(d(e)!==e||r||s==RegExp)t=r?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=m.get(e))return t;if(t=++p+"~",m.set(e,t),s==Array){for(l=0,t="@";l<e.length;l++)t+=b(e[l])+",";m.set(e,t)}if(s==d){t="#";let a=d.keys(e).sort();for(;!o(l=a.pop());)o(e[l])||(t+=l+":"+b(e[l])+",");m.set(e,t)}}return t},h=new WeakMap,g={},f={},y="undefined",v=typeof window!=y,j=typeof document!=y,w=()=>v&&typeof window.requestAnimationFrame!=y,N=(e,t)=>{let l=h.get(e);return[()=>!o(t)&&e.get(t)||g,a=>{if(!o(t)){let s=e.get(t);t in f||(f[t]=s),l[5](t,u(s,a),s||g)}},l[6],()=>!o(t)&&t in f?f[t]:!o(t)&&e.get(t)||g]},k=!0,[_,S]=v&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[i,i],C={initFocus:e=>(j&&document.addEventListener("visibilitychange",e),_("focus",e),()=>{j&&document.removeEventListener("visibilitychange",e),S("focus",e)}),initReconnect:e=>{let t=()=>{k=!0,e()},l=()=>{k=!1};return _("online",t),_("offline",l),()=>{S("online",t),S("offline",l)}}},B=(r.useId,!v||"Deno"in window),E=B?r.useEffect:r.useLayoutEffect,D="undefined"!=typeof navigator&&navigator.connection,T=!B&&D&&(["slow-2g","2g"].includes(D.effectiveType)||D.saveData),P=e=>{if(c(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?b(e):"",t]},M=0,$=()=>++M;async function A(...e){let[t,l,a,s]=e,r=u({populateCache:!0,throwOnError:!0},"boolean"==typeof s?{revalidate:s}:s||{}),i=r.populateCache,d=r.rollbackOnError,m=r.optimisticData,p=e=>"function"==typeof d?d(e):!1!==d,b=r.throwOnError;if(c(l)){let e=[];for(let a of t.keys())!/^\$(inf|sub)\$/.test(a)&&l(t.get(a)._k)&&e.push(a);return Promise.all(e.map(g))}return g(l);async function g(l){let s;let[d]=P(l);if(!d)return;let[u,g]=N(t,d),[f,y,v,j]=h.get(t),w=()=>{let e=f[d];return(c(r.revalidate)?r.revalidate(u().data,l):!1!==r.revalidate)&&(delete v[d],delete j[d],e&&e[0])?e[0](2).then(()=>u().data):u().data};if(e.length<3)return w();let k=a,_=$();y[d]=[_,0];let S=!o(m),C=u(),B=C.data,E=C._c,D=o(E)?B:E;if(S&&g({data:m=c(m)?m(D,B):m,_c:D}),c(k))try{k=k(D)}catch(e){s=e}if(k&&x(k)){if(k=await k.catch(e=>{s=e}),_!==y[d][0]){if(s)throw s;return k}s&&S&&p(s)&&(i=!0,g({data:D,_c:n}))}if(i&&!s&&(c(i)?g({data:i(k,D),error:n,_c:n}):g({data:k,error:n,_c:n})),y[d][1]=$(),Promise.resolve(w()).then(()=>{g({_c:n})}),s){if(b)throw s;return}return k}}let L=(e,t)=>{for(let l in e)e[l][0]&&e[l][0](t)},O=(e,t)=>{if(!h.has(e)){let l=u(C,t),a={},s=A.bind(n,e),r=i,d={},o=(e,t)=>{let l=d[e]||[];return d[e]=l,l.push(t),()=>l.splice(l.indexOf(t),1)},c=(t,l,a)=>{e.set(t,l);let s=d[t];if(s)for(let e of s)e(l,a)},x=()=>{if(!h.has(e)&&(h.set(e,[a,{},{},{},s,c,o]),!B)){let t=l.initFocus(setTimeout.bind(n,L.bind(n,a,0))),s=l.initReconnect(setTimeout.bind(n,L.bind(n,a,1)));r=()=>{t&&t(),s&&s(),h.delete(e)}}};return x(),[e,s,x,r]}return[e,h.get(e)[4]]},[R,K]=O(new Map),z=u({onLoadingSlow:i,onSuccess:i,onError:i,onErrorRetry:(e,t,l,a,s)=>{let r=l.errorRetryCount,i=s.retryCount,n=~~((Math.random()+.5)*(1<<(i<8?i:8)))*l.errorRetryInterval;(o(r)||!(i>r))&&setTimeout(a,n,s)},onDiscarded:i,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:T?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:T?5e3:3e3,compare:(e,t)=>b(e)==b(t),isPaused:()=>!1,cache:R,mutate:K,fallback:{}},{isOnline:()=>k,isVisible:()=>{let e=j&&document.visibilityState;return o(e)||"hidden"!==e}}),q=(e,t)=>{let l=u(e,t);if(t){let{use:a,fallback:s}=e,{use:r,fallback:i}=t;a&&r&&(l.use=a.concat(r)),s&&i&&(l.fallback=u(s,i))}return l},J=(0,r.createContext)({}),Y=v&&window.__SWR_DEVTOOLS_USE__,U=Y?window.__SWR_DEVTOOLS_USE__:[],I=()=>u(z,(0,r.useContext)(J));U.concat(e=>(t,l,a)=>{let s=l&&((...e)=>{let[a]=P(t),[,,,s]=h.get(R);if(a.startsWith("$inf$"))return l(...e);let r=s[a];return o(r)?l(...e):(delete s[a],r)});return e(t,s,a)}),Y&&(window.__SWR_DEVTOOLS_REACT__=r),r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),d.defineProperty(e=>{let{value:t}=e,l=(0,r.useContext)(J),a=c(t),s=(0,r.useMemo)(()=>a?t(l):t,[a,l,t]),i=(0,r.useMemo)(()=>a?s:q(l,s),[a,l,s]),d=s&&s.provider,o=(0,r.useRef)(n);d&&!o.current&&(o.current=O(d(i.cache||R),s));let x=o.current;return x&&(i.cache=x[0],i.mutate=x[1]),E(()=>{if(x)return x[2]&&x[2](),x[3]},[]),(0,r.createElement)(J.Provider,u(e,{value:i}))},"defaultValue",{value:z});let F=[{value:"inspection",label:"Muayene"},{value:"k_document",label:"K Belgesi"},{value:"traffic_insurance",label:"Trafik Sigortası"},{value:"kasko",label:"Kasko"},{value:"service_oil",label:"Yağ Bakımı"},{value:"service_general",label:"Genel Bakım"}],G=[{value:"service_oil",label:"Yağ Bakımı"},{value:"service_general",label:"Genel Bakım"}],V={inspection:"Muayene",muayene:"Muayene",k_document:"K Belgesi",k:"K Belgesi",k_belgesi:"K Belgesi",traffic_insurance:"Trafik Sigortası",insurance:"Trafik Sigortası",trafik_sigortası:"Trafik Sigortası",kasko:"Kasko",service_oil:"Yağ Bakımı",service_general:"Genel Bakım"},W=e=>{let t=e??"";return V[t.toLowerCase().replace(/\s+/g,"_")]??t.replace(/_/g," ")},H=e=>{if(!e)return null;let t=e.match(/km\s*=\s*(\d{1,9})/i);if(!t)return null;let l=Number(t[1]);return Number.isFinite(l)?l:null},X={plate:"",make:"",model:"",year:""},Q=(e,t="bg-slate-900 border-slate-700")=>{switch(e){case"critical":return"bg-rose-600/80 border-rose-300/60";case"warning":return"bg-amber-600/80 border-amber-300/60";case"ok":return"bg-emerald-600/80 border-emerald-300/60";case"expired":return"bg-rose-900/80 border-rose-400/60";default:return t}},Z=e=>null==e?"Planlı belge yok":e<0?`${Math.abs(e)} g\xfcn ge\xe7ti`:0===e?"Bug\xfcn":`${e} g\xfcn kaldı`;function ee(){let{mutate:e}=I(),[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[d,o]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[p,b]=(0,r.useState)(X),[h,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),[k,_]=(0,r.useState)(""),[S,C]=(0,r.useState)(null),[B,E]=(0,r.useState)({doc_type:F[0].value,valid_from:"",valid_to:"",note:""}),[D,T]=(0,r.useState)(!1),[P,M]=(0,r.useState)(null),[$,A]=(0,r.useState)(null),[L,O]=(0,r.useState)(null),[R,K]=(0,r.useState)({plate:"",make:"",model:"",year:""}),[z,q]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(null),[U,V]=(0,r.useState)(null),[ee,et]=(0,r.useState)(!1),[el,ea]=(0,r.useState)("plate"),[es,er]=(0,r.useState)("asc"),[ei,en]=(0,r.useState)({doc_type:F[0].value,valid_from:"",valid_to:"",note:""}),[ed,eo]=(0,r.useState)(!1),[ec,eu]=(0,r.useState)(null),[ex,em]=(0,r.useState)({mnt_type:"service_oil",date:"",km:"",note:""}),[ep,eb]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)(null),ef=k.trim().length>0,ey=(0,r.useCallback)(async()=>{n(!0);try{let e=await fetch((0,s.J)("/api/vehicles"));if(!e.ok)throw Error("Ara\xe7lar y\xfcklenemedi");let t=await e.json();l(t.map(e=>({...e,days_left:e.days_left??null,next_status:e.next_status??null,documents:(e.documents??[]).map(e=>({...e,id:e.id,days_left:e.days_left??null}))})))}catch(e){console.error(e),j("Ara\xe7 listesi alınırken hata oluştu")}finally{n(!1)}},[]),ev=(0,r.useCallback)(async()=>{u(!0);try{let e=await fetch((0,s.J)("/api/documents/upcoming?days=60"));if(!e.ok)throw Error("Yaklaşan belgeler alınamadı");let t=await e.json();o(t.map(e=>({...e,days_left:e.days_left??null})))}catch(e){console.error(e),j("Yaklaşan belgeler alınamadı")}finally{u(!1)}},[]),ej=(0,r.useCallback)(async()=>{await Promise.all([ey(),ev()])},[ey,ev]),ew=(0,r.useMemo)(()=>{let e=x.toLowerCase(),l=t.filter(t=>t.plate.toLowerCase().includes(e)||(t.model??"").toLowerCase().includes(e)||(t.make??"").toLowerCase().includes(e)),a="asc"===es?1:-1;return[...l].sort((e,t)=>{let l=e=>{switch(el){case"plate":return e.plate||"";case"make":return(e.make??"")||"";case"model":return(e.model??"")||"";case"year":return e.year??0;case"next_valid_to":return e.next_valid_to?new Date(e.next_valid_to).getTime():0;default:return""}},s=l(e),r=l(t);return"number"==typeof s&&"number"==typeof r?(s-r)*a:String(s).localeCompare(String(r),"tr",{numeric:!0})*a})},[t,x,el,es]),eN=(0,r.useMemo)(()=>{let e={};for(let l of t)for(let t of l.documents??[]){let l=(t.doc_type??"").toLowerCase();e[l]=(e[l]??0)+1}return e},[t]),ek=(0,r.useMemo)(()=>{let e=F.map(e=>({value:e.value,label:e.label,count:eN[e.value]??0})),t=new Set(F.map(e=>e.value)),l=0;return Object.entries(eN).forEach(([e,a])=>{t.has(e)||(l+=a)}),l>0&&e.push({value:"other",label:"Diğer",count:l}),e},[eN]),e_=(0,r.useMemo)(()=>Object.values(eN).reduce((e,t)=>e+t,0),[eN]),eS=(e,t)=>{b(l=>({...l,[e]:t}))},eC=(e,t)=>{E(l=>({...l,[e]:t}))},eB=e=>{Y(null),O(e.id),K({plate:e.plate,make:e.make??"",model:e.model??"",year:e.year?String(e.year):""})},eE=(e,t)=>{K(l=>({...l,[e]:t}))},eD=()=>{O(null),Y(null)},eT=async(t,l)=>{if(t.preventDefault(),Y(null),!k.trim()){Y("Şifre gerekli");return}if(!R.plate.trim()){Y("Plaka zorunlu");return}let a=R.year?Number(R.year):null;if(R.year&&(Number.isNaN(a)||a<0)){Y("Yıl bilgisi ge\xe7ersiz");return}let r={plate:R.plate.trim().toUpperCase(),make:R.make.trim()||null,model:R.model.trim()||null,year:a,admin_password:k};try{q(!0);let t=await fetch((0,s.J)(`/api/vehicles/${l}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Ara\xe7 g\xfcncellenemedi")}j("Ara\xe7 g\xfcncellendi"),O(null),await e((0,s.J)("/api/vehicles")),await ej()}catch(e){console.error(e),Y(e.message)}finally{q(!1)}},eP=(e,t)=>{em(l=>({...l,[e]:t}))},eM=e=>{eu(null),V(e.id),en({doc_type:e.doc_type,valid_from:e.valid_from?e.valid_from.slice(0,10):"",valid_to:e.valid_to?e.valid_to.slice(0,10):"",note:e.note??""})},e$=(e,t)=>{en(l=>({...l,[e]:t}))},eA=async t=>{if(t.preventDefault(),y(null),!p.plate.trim()){y("Plaka zorunlu");return}let l={plate:p.plate.trim().toUpperCase(),make:p.make.trim()||null,model:p.model.trim()||null,year:p.year?Number(p.year):null,admin_password:k};if(!k.trim()){y("Şifre gerekli");return}if(null!==l.year&&Number.isNaN(l.year)){y("Yıl bilgisi sayısal olmalı");return}try{g(!0);let t=await fetch((0,s.J)("/api/vehicles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Ara\xe7 eklenemedi")}b(X),j("Ara\xe7 başarıyla eklendi"),await e((0,s.J)("/api/vehicles")),await ej()}catch(e){console.error(e),y(e.message)}finally{g(!1)}},eL=async e=>{if(confirm("Aracı silmek istediğinize emin misiniz?")){if(!k.trim()){j("Silme işlemi i\xe7in şifre girin");return}N(e);try{let t=await fetch((0,s.J)(`/api/vehicles/${e}?admin_password=${encodeURIComponent(k)}`),{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Ara\xe7 silinemedi")}j("Ara\xe7 silindi"),await ej()}catch(e){console.error(e),j(e.message)}finally{N(null)}}},eO=async t=>{if(t.preventDefault(),M(null),!S){M("\xd6nce ara\xe7 se\xe7in");return}if(!k.trim()){M("Şifre gerekli");return}if(!B.valid_to){M("Bitiş tarihi zorunlu");return}let l={vehicle_id:S,doc_type:B.doc_type.trim()||F[0].value,valid_from:B.valid_from||null,valid_to:B.valid_to,note:B.note.trim()||null,admin_password:k};try{T(!0);let t=await fetch((0,s.J)("/api/documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Belge eklenemedi")}E(e=>({...e,valid_from:"",valid_to:"",note:""})),j("Belge kaydı oluşturuldu"),await e((0,s.J)("/api/vehicles")),await ej()}catch(e){console.error(e),M(e.message)}finally{T(!1)}},eR=async t=>{if(t.preventDefault(),eg(null),!S){eg("\xd6nce ara\xe7 se\xe7in");return}if(!k.trim()){eg("Şifre gerekli");return}if(!ex.date){eg("Bakım tarihi zorunlu");return}let l=ex.km?Number(ex.km):NaN;if(ex.km&&(Number.isNaN(l)||l<0)){eg("KM değeri ge\xe7ersiz");return}let a=[];ex.km&&a.push(`km=${l}`),ex.note.trim()&&a.push(ex.note.trim());let r=a.join("; "),i={vehicle_id:S,doc_type:ex.mnt_type,valid_from:ex.date,valid_to:ex.date,note:r||null,admin_password:k};try{eb(!0);let t=await fetch((0,s.J)("/api/documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Bakım kaydı eklenemedi")}em({mnt_type:"service_oil",date:"",km:"",note:""}),j("Bakım kaydı oluşturuldu"),await e((0,s.J)("/api/vehicles")),await ej()}catch(e){console.error(e),eg(e.message)}finally{eb(!1)}},eK=async(t,l)=>{if(t.preventDefault(),eu(null),!k.trim()){eu("Şifre gerekli");return}if(!ei.valid_to){eu("Bitiş tarihi zorunlu");return}let a={doc_type:ei.doc_type.trim(),valid_from:ei.valid_from||null,valid_to:ei.valid_to,note:ei.note.trim()||null,admin_password:k};try{eo(!0);let t=await fetch((0,s.J)(`/api/documents/${l}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Belge g\xfcncellenemedi")}j("Belge g\xfcncellendi"),V(null),await e((0,s.J)("/api/vehicles")),await ej()}catch(e){console.error(e),eu(e.message)}finally{eo(!1)}},ez=async e=>{if(!k.trim()){j("Belge silmek i\xe7in şifre girin");return}if(confirm("Belgeyi silmek istediğinize emin misiniz?")){A(e);try{let t=await fetch((0,s.J)(`/api/documents/${e}?admin_password=${encodeURIComponent(k)}`),{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail??"Belge silinemedi")}j("Belge silindi"),await ej()}catch(e){console.error(e),j(e.message)}finally{A(null)}}},eq=e=>{let t=(e.documents??[]).filter(e=>"service_oil"===e.doc_type||"service_general"===e.doc_type);if(0===t.length)return null;t.map(e=>({d:e,date:e.valid_from??e.valid_to??null})).filter(e=>!!e.date);let l=null;for(let e of t){let t=H(e.note);null!=t&&(null==l||t>l)&&(l=t)}return null!=l?l:null};return(0,a.jsxs)("section",{className:"space-y-10 max-w-7xl mx-auto px-3 sm:px-4 md:px-6",children:[(0,a.jsxs)("header",{className:"space-y-3",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-white",children:"Ara\xe7 Y\xf6netimi"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Ara\xe7ları ekleyin, kaldırın ve yaklaşan belge bitişlerini takip edin. Bakım ve KM girişleri i\xe7in aşağıdaki formları kullanın."})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Belge Sayıları"}),(0,a.jsxs)("div",{className:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-300",children:["Toplam Belge: ",a.jsx("span",{className:"font-semibold text-white",children:e_})]})]}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:ek.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2",children:[a.jsx("span",{className:"text-sm text-slate-300",children:e.label}),a.jsx("span",{className:"ml-3 rounded-md bg-slate-800 px-2 py-0.5 text-sm font-semibold text-white",children:e.count})]},e.value))})]}),v?a.jsx("div",{className:"rounded-lg border border-emerald-500/40 bg-emerald-900/40 px-4 py-3 text-sm text-emerald-100",children:v}):null,(0,a.jsxs)("div",{className:"grid gap-6 sm:gap-7 lg:grid-cols-[2fr_3fr]",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Yeni Ara\xe7 Ekle"}),a.jsx("p",{className:"mb-4 text-sm text-slate-400",children:"Silme veya belge işlemleri i\xe7in sağ \xfcstteki şifre alanını kullanın."}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eA,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Plaka*",a.jsx("input",{value:p.plate,onChange:e=>eS("plate",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"34ABC123",required:!0})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Marka",a.jsx("input",{value:p.make,onChange:e=>eS("make",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"Volvo"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Model",a.jsx("input",{value:p.model,onChange:e=>eS("model",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"FH16"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Yıl",a.jsx("input",{value:p.year,onChange:e=>eS("year",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"2024",inputMode:"numeric"})]})]}),f?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:f}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Şifre girilmediği i\xe7in bu form pasif durumdadır."}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:h||!ef,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:h?"Kaydediliyor...":"Ara\xe7 Ekle"})})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Yaklaşan Bitişler (60 g\xfcn)"}),a.jsx("span",{className:"rounded-full bg-slate-800 px-2.5 sm:px-3 py-0.5 sm:py-1 text-xs text-slate-300",children:c?"Y\xfckleniyor":`${d.length} belge`})]}),c?a.jsx("p",{className:"text-sm text-slate-400",children:"Yaklaşan belgeler y\xfckleniyor..."}):0===d.length?a.jsx("p",{className:"text-sm text-slate-400",children:"\xd6n\xfcm\xfczdeki 60 g\xfcnde s\xfcresi dolacak belge bulunmuyor."}):a.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:d.map(e=>(0,a.jsxs)("article",{className:`rounded-lg border px-4 py-3 text-sm text-white shadow-sm ${Q(e.status,"bg-slate-900 border-slate-700")}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-white/70",children:[a.jsx("span",{children:e.plate}),a.jsx("span",{children:Z(e.days_left)})]}),a.jsx("div",{className:"mt-2 text-sm font-semibold capitalize",children:W(e.doc_type)}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-white/80",children:["Bitiş Tarihi: ",new Date(e.valid_to).toLocaleDateString("tr-TR")]}),e.valid_from?(0,a.jsxs)("div",{className:"text-xs text-white/60",children:["Başlangı\xe7: ",new Date(e.valid_from).toLocaleDateString("tr-TR")]}):null,e.note?(0,a.jsxs)("div",{className:"text-xs text-white/60",children:["Not: ",e.note]}):null]},e.doc_id))}),(0,a.jsxs)("div",{className:"mt-8 border-t border-slate-800 pt-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Belge Oluştur"}),a.jsx("p",{className:"mb-4 text-sm text-slate-400",children:"Muayene, sigorta gibi belgelerin başlangı\xe7/bitiş tarihlerini girerek takibe ekleyin."}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eO,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ara\xe7*",(0,a.jsxs)("select",{value:S??"",onChange:e=>C(Number(e.target.value)||null),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Ara\xe7 se\xe7in"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," ",e.make?`- ${e.make}`:""]},e.id))]})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Belge T\xfcr\xfc*",a.jsx("select",{value:B.doc_type,onChange:e=>eC("doc_type",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",children:F.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ge\xe7erlilik Başlangıcı",a.jsx("input",{type:"date",value:B.valid_from,onChange:e=>eC("valid_from",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ge\xe7erlilik Bitişi*",a.jsx("input",{type:"date",value:B.valid_to,onChange:e=>eC("valid_to",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0})]}),(0,a.jsxs)("label",{className:"md:col-span-2 text-sm text-slate-300",children:["Not",a.jsx("textarea",{value:B.note,onChange:e=>eC("note",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:border-slate-500 focus:outline-none",rows:3,placeholder:"\xd6rn. Muayene randevusu alınacak"})]})]}),P?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:P}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Belge eklemek i\xe7in \xf6nce şifre girin."}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:D||!ef,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-blue-500 disabled:cursor-not-allowed disabled:opacity-60",children:D?"Kaydediliyor...":"Belgeyi Kaydet"})})]})]}),(0,a.jsxs)("div",{className:"mt-8 border-t border-slate-800 pt-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Bakım Kaydı Oluştur (KM ile)"}),(0,a.jsxs)("p",{className:"mb-4 text-sm text-slate-400",children:["Yağ bakımı / genel bakım i\xe7in tarih ve KM girin. KM bilgisi not i\xe7inde saklanır (\xf6r. ",a.jsx("code",{children:"km=185000"}),")."]}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eR,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ara\xe7*",(0,a.jsxs)("select",{value:S??"",onChange:e=>C(Number(e.target.value)||null),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Ara\xe7 se\xe7in"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," ",e.make?`- ${e.make}`:""]},e.id))]})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Bakım T\xfcr\xfc*",a.jsx("select",{value:ex.mnt_type,onChange:e=>eP("mnt_type",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:G.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Bakım Tarihi*",a.jsx("input",{type:"date",value:ex.date,onChange:e=>eP("date",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["KM",a.jsx("input",{value:ex.km,onChange:e=>eP("km",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"\xd6rn. 185000",inputMode:"numeric"})]}),(0,a.jsxs)("label",{className:"md:col-span-2 text-sm text-slate-300",children:["Not",a.jsx("textarea",{value:ex.note,onChange:e=>eP("note",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:border-slate-500 focus:outline-none",rows:3,placeholder:"\xd6rn. Filtreler değişti"})]})]}),eh?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:eh}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Bakım eklemek i\xe7in \xf6nce şifre girin."}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:ep||!ef,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:ep?"Kaydediliyor...":"Bakımı Kaydet"})})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-4 flex flex-col gap-3 sm:gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Ara\xe7 Listesi"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Arama kutusunu kullanarak plakaya, marka veya modele g\xf6re filtreleyin. Şifre girilmezse sayfa salt okunur modda kalır."}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${ef?"bg-emerald-600/20 text-emerald-300":"bg-slate-800 text-slate-400"}`,children:ef?"Y\xf6netici modu aktif":"Salt okunur mod"}),a.jsx("button",{type:"button",onClick:()=>{},className:"rounded-full border border-slate-600 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-400 hover:text-white",children:ef?"Şifreyi değiştir":"Şifre gir"}),a.jsx("button",{type:"button",onClick:()=>et(e=>!e),disabled:!ef,className:`rounded-full border px-3 py-1 text-xs transition ${ee?"border-sky-400 bg-sky-500/20 text-sky-100":"border-slate-600 text-slate-200 hover:border-slate-400 hover:text-white"} disabled:cursor-not-allowed disabled:opacity-60`,title:"T\xfcm sayfada d\xfczenleme modunu a\xe7/kapat",children:ee?"D\xfczenlemeyi kapat":"D\xfczenle"}),ee?(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 pl-1",children:[(0,a.jsxs)("label",{className:"text-xs text-slate-400",children:["Sırala:",(0,a.jsxs)("select",{value:el,onChange:e=>ea(e.target.value),className:"ml-1 rounded-md border border-slate-600 bg-slate-950 px-2 py-1 text-xs text-white",children:[a.jsx("option",{value:"plate",children:"Plaka"}),a.jsx("option",{value:"make",children:"Marka"}),a.jsx("option",{value:"model",children:"Model"}),a.jsx("option",{value:"year",children:"Yıl"}),a.jsx("option",{value:"next_valid_to",children:"Bitiş Tarihi"})]})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-400",children:["Y\xf6n:",(0,a.jsxs)("select",{value:es,onChange:e=>er(e.target.value),className:"ml-1 rounded-md border border-slate-600 bg-slate-950 px-2 py-1 text-xs text-white",children:[a.jsx("option",{value:"asc",children:"Artan"}),a.jsx("option",{value:"desc",children:"Azalan"})]})]})]}):null]})]}),a.jsx("input",{value:x,onChange:e=>m(e.target.value),placeholder:"Plaka, marka veya model ara...",className:"w-full rounded-lg border border-slate-700 bg-slate-950 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-slate-500 focus:outline-none md:w-72"})]}),a.jsx("div",{className:"sm:hidden space-y-3",children:i?a.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4 text-slate-400",children:"Ara\xe7lar y\xfckleniyor..."}):0===ew.length?a.jsx("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4 text-slate-400",children:"Sonu\xe7 bulunamadı."}):ew.map(e=>{let t=eq(e);return(0,a.jsxs)("article",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx("div",{className:"text-base font-semibold text-white break-words",children:e.plate}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 break-words",children:[(e.make??"").trim()||(e.model??"").trim()?`${e.make??""} ${e.model??""}`.trim():"-",e.year?` • ${e.year}`:""]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-end",children:[a.jsx("button",{type:"button",onClick:()=>eB(e),disabled:!ef,className:"shrink-0 rounded-md border border-sky-500/60 px-2.5 py-1 text-[11px] font-medium text-sky-200 transition hover:bg-sky-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),a.jsx("button",{onClick:()=>eL(e.id),disabled:w===e.id||!ef,className:"shrink-0 rounded-md border border-rose-500/60 px-2.5 py-1 text-[11px] font-medium text-rose-200 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:w===e.id?"Siliniyor...":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-300",children:[(0,a.jsxs)("div",{className:`rounded-md border px-2 py-1 ${Q(e.next_status??(null!=e.days_left&&e.days_left>=0?e.days_left<=7?"critical":e.days_left<=30?"warning":"ok":null!=e.days_left&&e.days_left<0?"expired":"unknown"),"bg-slate-900 border-slate-700")}`,children:[a.jsx("div",{className:"font-semibold",children:e.next_valid_to?new Date(e.next_valid_to).toLocaleDateString("tr-TR"):"Belge yok"}),a.jsx("div",{className:"text-white/80",children:Z(e.days_left)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1",children:[a.jsx("div",{className:"text-white/80",children:"Son KM"}),a.jsx("div",{className:"font-semibold text-white",children:null!=t?`${t.toLocaleString("tr-TR")} km`:"-"})]})]}),e.documents.length>0?(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[e.documents.slice(0,3).map(t=>(0,a.jsxs)("div",{className:`rounded-lg border px-3 py-2 ${Q(t.status,"bg-slate-900/80 border-slate-700")}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 text-[11px] uppercase tracking-wide text-white/70",children:[a.jsx("span",{className:"truncate",children:W(t.doc_type)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("span",{children:Z(t.days_left)}),a.jsx("button",{type:"button",onClick:()=>eM(t),disabled:!ef,className:"rounded-md border border-sky-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-sky-100 transition hover:bg-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),a.jsx("button",{onClick:()=>ez(t.id),disabled:$===t.id||!ef,className:"rounded-md border border-rose-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-rose-100 transition hover:bg-rose-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:$===t.id?"Siliniyor":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap gap-x-4 gap-y-1 text-[11px] text-white/80",children:[(0,a.jsxs)("span",{children:["Bitiş: ",t.valid_to?new Date(t.valid_to).toLocaleDateString("tr-TR"):"-"]}),t.valid_from?(0,a.jsxs)("span",{children:["Başlangı\xe7: ",new Date(t.valid_from).toLocaleDateString("tr-TR")]}):null,t.note?(0,a.jsxs)("span",{className:"break-words",children:["Not: ",t.note]}):null]}),ee||U===t.id?(0,a.jsxs)("form",{className:"mt-2 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-2",onSubmit:e=>eK(e,t.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["T\xfcr",a.jsx("select",{value:ei.doc_type,onChange:e=>e$("doc_type",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",children:F.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Başlangı\xe7",a.jsx("input",{type:"date",value:ei.valid_from,onChange:e=>e$("valid_from",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2 sm:col-span-1",children:["Bitiş*",a.jsx("input",{type:"date",value:ei.valid_to,onChange:e=>e$("valid_to",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2",children:["Not",a.jsx("textarea",{value:ei.note,onChange:e=>e$("note",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",rows:2})]})]}),ec?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:ec}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{V(null),eu(null)},className:"rounded-md border border-slate-600 px-2 py-1 text-[11px] text-slate-200",children:"İptal"}),a.jsx("button",{type:"submit",disabled:ed||!ef,className:"rounded-md bg-sky-600 px-3 py-1 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:ed?"Kaydediliyor...":"Kaydet"})]})]}):null]},`${e.id}-${t.id}`)),e.documents.length>3?(0,a.jsxs)("div",{className:"text-[11px] text-slate-400",children:["+",e.documents.length-3," belge daha"]}):null]}):null,ee||L===e.id?(0,a.jsxs)("form",{className:"mt-3 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-3",onSubmit:t=>eT(t,e.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2",children:["Plaka*",a.jsx("input",{value:R.plate,onChange:e=>eE("plate",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Marka",a.jsx("input",{value:R.make,onChange:e=>eE("make",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Model",a.jsx("input",{value:R.model,onChange:e=>eE("model",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Yıl",a.jsx("input",{value:R.year,onChange:e=>eE("year",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",inputMode:"numeric"})]})]}),J?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:J}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:eD,className:"rounded-md border border-slate-600 px-3 py-1 text-[11px] text-slate-200",children:"İptal"}),a.jsx("button",{type:"submit",disabled:z||!ef,className:"rounded-md bg-sky-600 px-4 py-1.5 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:z?"Kaydediliyor...":"Kaydet"})]})]}):null]},e.id)})}),a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-800 text-sm text-slate-200",children:[a.jsx("thead",{className:"bg-slate-800/80 text-xs uppercase tracking-wide text-slate-400",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Plaka"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Marka/Model"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Belge Durumu"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Son KM"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Eklenme"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"İşlemler"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-800",children:i?a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-4 text-center text-slate-400",colSpan:6,children:"Ara\xe7lar y\xfckleniyor..."})}):0===ew.length?a.jsx("tr",{children:a.jsx("td",{className:"px-4 py-4 text-center text-slate-400",colSpan:6,children:"Sonu\xe7 bulunamadı."})}):ew.map(e=>{let t=eq(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-slate-800/60",children:[a.jsx("td",{className:"px-4 py-4 font-semibold text-white",children:e.plate}),(0,a.jsxs)("td",{className:"px-4 py-4",children:[a.jsx("div",{className:"text-white",children:(e.make??"").trim()||(e.model??"").trim()?`${e.make??""} ${e.model??""}`.trim():"-"}),e.year?a.jsx("div",{className:"text-xs text-slate-500",children:e.year}):null]}),(0,a.jsxs)("td",{className:"px-4 py-4",children:[(0,a.jsxs)("div",{className:`inline-flex min-w-[10rem] flex-col rounded-lg border px-3 py-2 text-xs ${Q(e.next_status??(null!=e.days_left&&e.days_left>=0?e.days_left<=7?"critical":e.days_left<=30?"warning":"ok":null!=e.days_left&&e.days_left<0?"expired":"unknown"),"bg-slate-900 border-slate-700")}`,children:[a.jsx("span",{className:"font-semibold",children:e.next_valid_to?new Date(e.next_valid_to).toLocaleDateString("tr-TR"):"Belge bulunmuyor"}),a.jsx("span",{className:"text-white/80",children:Z(e.days_left)}),(0,a.jsxs)("span",{className:"text-white/60",children:["Toplam belge: ",e.document_count]})]}),e.documents.length>0?a.jsx("div",{className:"mt-3 space-y-2 text-xs text-white/80",children:e.documents.map(t=>(0,a.jsxs)("div",{className:`rounded-lg border px-3 py-2 ${Q(t.status,"bg-slate-900/80 border-slate-700")}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-white/70",children:[a.jsx("span",{children:W(t.doc_type)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:Z(t.days_left)}),a.jsx("button",{type:"button",onClick:()=>eM(t),disabled:!ef,className:"rounded-md border border-sky-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-sky-100 transition hover:bg-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),a.jsx("button",{onClick:()=>ez(t.id),disabled:$===t.id||!ef,className:"rounded-md border border-rose-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-rose-100 transition hover:bg-rose-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:$===t.id?"Siliniyor":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-1 flex flex-col gap-1 text-[11px] text-white/80",children:[(0,a.jsxs)("span",{children:["Bitiş: ",t.valid_to?new Date(t.valid_to).toLocaleDateString("tr-TR"):"-"]}),t.valid_from?(0,a.jsxs)("span",{children:["Başlangı\xe7: ",new Date(t.valid_from).toLocaleDateString("tr-TR")]}):null,t.note?(0,a.jsxs)("span",{children:["Not: ",t.note]}):null]}),ee||U===t.id?(0,a.jsxs)("form",{className:"mt-2 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-3",onSubmit:e=>eK(e,t.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-4",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["T\xfcr",a.jsx("select",{value:ei.doc_type,onChange:e=>e$("doc_type",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",children:F.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Başlangı\xe7",a.jsx("input",{type:"date",value:ei.valid_from,onChange:e=>e$("valid_from",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Bitiş*",a.jsx("input",{type:"date",value:ei.valid_to,onChange:e=>e$("valid_to",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 md:col-span-4",children:["Not",a.jsx("textarea",{value:ei.note,onChange:e=>e$("note",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",rows:2})]})]}),ec?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:ec}):null,ef?null:a.jsx("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{V(null),eu(null)},className:"rounded-md border border-slate-600 px-3 py-1 text-[11px] text-slate-200",children:"İptal"}),a.jsx("button",{type:"submit",disabled:ed||!ef,className:"rounded-md bg-sky-600 px-4 py-1.5 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:ed?"Kaydediliyor...":"Kaydet"})]})]}):null]},`${e.id}-${t.id}`))}):null]}),a.jsx("td",{className:"px-4 py-4 text-sm text-slate-300",children:null!=t?`${t.toLocaleString("tr-TR")} km`:"-"}),a.jsx("td",{className:"px-4 py-4 text-sm text-slate-300",children:e.created_at?new Date(e.created_at).toLocaleString("tr-TR"):"-"}),(0,a.jsxs)("td",{className:"px-4 py-4 text-right",children:[a.jsx("button",{type:"button",onClick:()=>eB(e),disabled:!ef,className:"mr-2 rounded-lg border border-sky-500/60 px-3 py-1 text-xs font-medium text-sky-200 transition hover:bg-sky-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),a.jsx("button",{onClick:()=>eL(e.id),disabled:w===e.id||!ef,className:"rounded-lg border border-rose-500/60 px-3 py-1 text-xs font-medium text-rose-200 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:w===e.id?"Siliniyor...":"Sil"})]})]},e.id),ee||L===e.id?a.jsx("tr",{className:"bg-slate-900/60",children:a.jsx("td",{colSpan:6,className:"px-4 py-4",children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:t=>eT(t,e.id),children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-4",children:[(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Plaka*",a.jsx("input",{value:R.plate,onChange:e=>eE("plate",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Marka",a.jsx("input",{value:R.make,onChange:e=>eE("make",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white"})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Model",a.jsx("input",{value:R.model,onChange:e=>eE("model",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white"})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Yıl",a.jsx("input",{value:R.year,onChange:e=>eE("year",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white",inputMode:"numeric"})]})]}),J?a.jsx("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:J}):null,(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:eD,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm text-slate-200",children:"İptal"}),a.jsx("button",{type:"submit",disabled:z||!ef,className:"rounded-md bg-sky-600 px-4 py-1.5 text-sm font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:z?"Kaydediliyor...":"Kaydet"})]})]})})}):null]})})})]})})]})]})}},6824:(e,t,l)=>{"use strict";l.d(t,{J:()=>s});let a=(process.env.NEXT_PUBLIC_API_URL||"").replace(/\/$/,""),s=e=>`${a}${e.startsWith("/")?e:`/${e}`}`},5442:(e,t,l)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=l(7577),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useState,i=a.useEffect,n=a.useLayoutEffect,d=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!s(e,l)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var l=t(),a=r({inst:{value:l,getSnapshot:t}}),s=a[0].inst,c=a[1];return n(function(){s.value=l,s.getSnapshot=t,o(s)&&c({inst:s})},[e,l,t]),i(function(){return o(s)&&c({inst:s}),e(function(){o(s)&&c({inst:s})})},[e]),d(l),l};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},4095:(e,t,l)=>{"use strict";e.exports=l(5442)},1506:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>r,metadata:()=>s});var a=l(9510);l(7272);let s={title:"HYS Fleet",description:"Belge takibi ve ara\xe7 y\xf6netimi paneli"};function r({children:e}){return a.jsx("html",{lang:"tr",children:a.jsx("body",{className:"min-h-screen bg-slate-950 text-white",children:(0,a.jsxs)("div",{className:"mx-auto flex min-h-screen max-w-6xl flex-col px-6 py-10",children:[a.jsx("header",{className:"mb-10 flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"HYS Ara\xe7lar"}),a.jsx("p",{className:"text-slate-300",children:"60 g\xfcn i\xe7erisinde s\xfcresi dolacak belgeler ve ara\xe7 y\xf6netimi paneli"})]})}),a.jsx("main",{className:"flex-1",children:e})]})})})}},5502:(e,t,l)=>{"use strict";l.r(t),l.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});var a=l(8570);let s=(0,a.createProxy)(String.raw`/Users/yusufegeeren/Desktop/hys-fleet/web/app/vehicles/page.tsx`),{__esModule:r,$$typeof:i}=s;s.default;let n=(0,a.createProxy)(String.raw`/Users/yusufegeeren/Desktop/hys-fleet/web/app/vehicles/page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var l=e=>t(t.s=e),a=t.X(0,[819],()=>l(4009));module.exports=a})();