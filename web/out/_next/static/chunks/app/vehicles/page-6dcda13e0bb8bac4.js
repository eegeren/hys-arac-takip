(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{7854:function(e,t,l){Promise.resolve().then(l.bind(l,3308))},3308:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return h}});var a=l(7437),s=l(6264),r=l(2265),i=l(9039);let d=[{value:"inspection",label:"Muayene"},{value:"k_document",label:"K Belgesi"},{value:"traffic_insurance",label:"Trafik Sigortası"},{value:"kasko",label:"Kasko"},{value:"service_oil",label:"Yağ Bakımı"},{value:"service_general",label:"Genel Bakım"}],n=[{value:"service_oil",label:"Yağ Bakımı"},{value:"service_general",label:"Genel Bakım"}],o="hys-fleet-admin-password",c={inspection:"Muayene",muayene:"Muayene",k_document:"K Belgesi",k:"K Belgesi",k_belgesi:"K Belgesi",traffic_insurance:"Trafik Sigortası",insurance:"Trafik Sigortası",trafik_sigortası:"Trafik Sigortası",kasko:"Kasko",service_oil:"Yağ Bakımı",service_general:"Genel Bakım"},u=e=>{var t;let l=null!=e?e:"";return null!==(t=c[l.toLowerCase().replace(/\s+/g,"_")])&&void 0!==t?t:l.replace(/_/g," ")},m=e=>{if(!e)return null;let t=e.match(/km\s*=\s*(\d{1,9})/i);if(!t)return null;let l=Number(t[1]);return Number.isFinite(l)?l:null},x={plate:"",make:"",model:"",year:""},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bg-slate-900 border-slate-700";switch(e){case"critical":return"bg-rose-600/80 border-rose-300/60";case"warning":return"bg-amber-600/80 border-amber-300/60";case"ok":return"bg-emerald-600/80 border-emerald-300/60";case"expired":return"bg-rose-900/80 border-rose-400/60";default:return t}},b=e=>null==e?"Planlı belge yok":e<0?"".concat(Math.abs(e)," g\xfcn ge\xe7ti"):0===e?"Bug\xfcn":"".concat(e," g\xfcn kaldı");function h(){let{mutate:e}=(0,i.kY)(),[t,l]=(0,r.useState)([]),[c,h]=(0,r.useState)(!0),[g,y]=(0,r.useState)([]),[v,f]=(0,r.useState)(!0),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(x),[_,S]=(0,r.useState)(!1),[C,B]=(0,r.useState)(null),[T,D]=(0,r.useState)(null),[M,E]=(0,r.useState)(null),[K,z]=(0,r.useState)(""),[A,L]=(0,r.useState)(null),[Y,J]=(0,r.useState)({doc_type:d[0].value,valid_from:"",valid_to:"",note:""}),[P,O]=(0,r.useState)(!1),[R,q]=(0,r.useState)(null),[U,I]=(0,r.useState)(null),[G,F]=(0,r.useState)(null),[H,V]=(0,r.useState)({plate:"",make:"",model:"",year:""}),[W,X]=(0,r.useState)(!1),[$,Q]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(null),[et,el]=(0,r.useState)(!1),[ea,es]=(0,r.useState)("plate"),[er,ei]=(0,r.useState)("asc"),[ed,en]=(0,r.useState)({doc_type:d[0].value,valid_from:"",valid_to:"",note:""}),[eo,ec]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(null),[ex,ep]=(0,r.useState)({mnt_type:"service_oil",date:"",km:"",note:""}),[eb,eh]=(0,r.useState)(!1),[eg,ey]=(0,r.useState)(null),ev=K.trim().length>0;(0,r.useEffect)(()=>{let e=window.localStorage.getItem(o);if(e&&e.trim())z(e.trim());else{let e=window.prompt("Y\xf6netici işlemleri i\xe7in şifre girin (salt okunur g\xf6r\xfcnt\xfcleme i\xe7in boş bırakabilirsiniz)","");e&&e.trim()&&z(e.trim())}},[]),(0,r.useEffect)(()=>{K.trim()?window.localStorage.setItem(o,K.trim()):window.localStorage.removeItem(o)},[K]),(0,r.useEffect)(()=>{if(!T)return;let e=setTimeout(()=>D(null),4e3);return()=>clearTimeout(e)},[T]),(0,r.useEffect)(()=>{et||(F(null),ee(null),Q(null),em(null))},[et]);let ef=(0,r.useCallback)(async()=>{h(!0);try{let e=await fetch((0,s.J)("/api/vehicles"));if(!e.ok)throw Error("Ara\xe7lar y\xfcklenemedi");let t=await e.json();l(t.map(e=>{var t,l,a;return{...e,days_left:null!==(t=e.days_left)&&void 0!==t?t:null,next_status:null!==(l=e.next_status)&&void 0!==l?l:null,documents:(null!==(a=e.documents)&&void 0!==a?a:[]).map(e=>{var t;return{...e,id:e.id,days_left:null!==(t=e.days_left)&&void 0!==t?t:null}})}}))}catch(e){console.error(e),D("Ara\xe7 listesi alınırken hata oluştu")}finally{h(!1)}},[]),ej=(0,r.useCallback)(async()=>{f(!0);try{let e=await fetch((0,s.J)("/api/documents/upcoming?days=60"));if(!e.ok)throw Error("Yaklaşan belgeler alınamadı");let t=await e.json();y(t.map(e=>{var t;return{...e,days_left:null!==(t=e.days_left)&&void 0!==t?t:null}}))}catch(e){console.error(e),D("Yaklaşan belgeler alınamadı")}finally{f(!1)}},[]),eN=(0,r.useCallback)(async()=>{await Promise.all([ef(),ej()])},[ef,ej]);(0,r.useEffect)(()=>{eN()},[eN]),(0,r.useEffect)(()=>{if(0===t.length){L(null);return}A&&t.some(e=>e.id===A)||L(t[0].id)},[t,A]);let ew=(0,r.useMemo)(()=>{let e=j.toLowerCase(),l=t.filter(t=>{var l,a;return t.plate.toLowerCase().includes(e)||(null!==(l=t.model)&&void 0!==l?l:"").toLowerCase().includes(e)||(null!==(a=t.make)&&void 0!==a?a:"").toLowerCase().includes(e)}),a="asc"===er?1:-1;return[...l].sort((e,t)=>{let l=e=>{var t,l,a;switch(ea){case"plate":return e.plate||"";case"make":return(null!==(t=e.make)&&void 0!==t?t:"")||"";case"model":return(null!==(l=e.model)&&void 0!==l?l:"")||"";case"year":return null!==(a=e.year)&&void 0!==a?a:0;case"next_valid_to":return e.next_valid_to?new Date(e.next_valid_to).getTime():0;default:return""}},s=l(e),r=l(t);return"number"==typeof s&&"number"==typeof r?(s-r)*a:String(s).localeCompare(String(r),"tr",{numeric:!0})*a})},[t,j,ea,er]),ek=(0,r.useMemo)(()=>{let e={};for(let r of t){var l,a,s;for(let t of null!==(l=r.documents)&&void 0!==l?l:[]){let l=(null!==(a=t.doc_type)&&void 0!==a?a:"").toLowerCase();e[l]=(null!==(s=e[l])&&void 0!==s?s:0)+1}}return e},[t]),e_=(0,r.useMemo)(()=>{let e=d.map(e=>{var t;return{value:e.value,label:e.label,count:null!==(t=ek[e.value])&&void 0!==t?t:0}}),t=new Set(d.map(e=>e.value)),l=0;return Object.entries(ek).forEach(e=>{let[a,s]=e;t.has(a)||(l+=s)}),l>0&&e.push({value:"other",label:"Diğer",count:l}),e},[ek]),eS=(0,r.useMemo)(()=>Object.values(ek).reduce((e,t)=>e+t,0),[ek]),eC=(e,t)=>{k(l=>({...l,[e]:t}))},eB=(e,t)=>{J(l=>({...l,[e]:t}))},eT=e=>{var t,l;Q(null),F(e.id),V({plate:e.plate,make:null!==(t=e.make)&&void 0!==t?t:"",model:null!==(l=e.model)&&void 0!==l?l:"",year:e.year?String(e.year):""})},eD=(e,t)=>{V(l=>({...l,[e]:t}))},eM=()=>{F(null),Q(null)},eE=async(t,l)=>{if(t.preventDefault(),Q(null),!K.trim()){Q("Şifre gerekli");return}if(!H.plate.trim()){Q("Plaka zorunlu");return}let a=H.year?Number(H.year):null;if(H.year&&(Number.isNaN(a)||a<0)){Q("Yıl bilgisi ge\xe7ersiz");return}let r={plate:H.plate.trim().toUpperCase(),make:H.make.trim()||null,model:H.model.trim()||null,year:a,admin_password:K};try{X(!0);let t=await fetch((0,s.J)("/api/vehicles/".concat(l)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok){var i;let e=await t.json().catch(()=>({}));throw Error(null!==(i=e.detail)&&void 0!==i?i:"Ara\xe7 g\xfcncellenemedi")}D("Ara\xe7 g\xfcncellendi"),F(null),await e((0,s.J)("/api/vehicles")),await eN()}catch(e){console.error(e),Q(e.message)}finally{X(!1)}},eK=(e,t)=>{ep(l=>({...l,[e]:t}))},ez=e=>{var t;em(null),ee(e.id),en({doc_type:e.doc_type,valid_from:e.valid_from?e.valid_from.slice(0,10):"",valid_to:e.valid_to?e.valid_to.slice(0,10):"",note:null!==(t=e.note)&&void 0!==t?t:""})},eA=(e,t)=>{en(l=>({...l,[e]:t}))},eL=async t=>{if(t.preventDefault(),B(null),!w.plate.trim()){B("Plaka zorunlu");return}let l={plate:w.plate.trim().toUpperCase(),make:w.make.trim()||null,model:w.model.trim()||null,year:w.year?Number(w.year):null,admin_password:K};if(!K.trim()){B("Şifre gerekli");return}if(null!==l.year&&Number.isNaN(l.year)){B("Yıl bilgisi sayısal olmalı");return}try{S(!0);let t=await fetch((0,s.J)("/api/vehicles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){var a;let e=await t.json().catch(()=>({}));throw Error(null!==(a=e.detail)&&void 0!==a?a:"Ara\xe7 eklenemedi")}k(x),D("Ara\xe7 başarıyla eklendi"),await e((0,s.J)("/api/vehicles")),await eN()}catch(e){console.error(e),B(e.message)}finally{S(!1)}},eY=async e=>{if(confirm("Aracı silmek istediğinize emin misiniz?")){if(!K.trim()){D("Silme işlemi i\xe7in şifre girin");return}E(e);try{let l=await fetch((0,s.J)("/api/vehicles/".concat(e,"?admin_password=").concat(encodeURIComponent(K))),{method:"DELETE"});if(!l.ok){var t;let e=await l.json().catch(()=>({}));throw Error(null!==(t=e.detail)&&void 0!==t?t:"Ara\xe7 silinemedi")}D("Ara\xe7 silindi"),await eN()}catch(e){console.error(e),D(e.message)}finally{E(null)}}},eJ=async t=>{if(t.preventDefault(),q(null),!A){q("\xd6nce ara\xe7 se\xe7in");return}if(!K.trim()){q("Şifre gerekli");return}if(!Y.valid_to){q("Bitiş tarihi zorunlu");return}let l={vehicle_id:A,doc_type:Y.doc_type.trim()||d[0].value,valid_from:Y.valid_from||null,valid_to:Y.valid_to,note:Y.note.trim()||null,admin_password:K};try{O(!0);let t=await fetch((0,s.J)("/api/documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){var a;let e=await t.json().catch(()=>({}));throw Error(null!==(a=e.detail)&&void 0!==a?a:"Belge eklenemedi")}J(e=>({...e,valid_from:"",valid_to:"",note:""})),D("Belge kaydı oluşturuldu"),await e((0,s.J)("/api/vehicles")),await eN()}catch(e){console.error(e),q(e.message)}finally{O(!1)}},eP=async t=>{if(t.preventDefault(),ey(null),!A){ey("\xd6nce ara\xe7 se\xe7in");return}if(!K.trim()){ey("Şifre gerekli");return}if(!ex.date){ey("Bakım tarihi zorunlu");return}let l=ex.km?Number(ex.km):NaN;if(ex.km&&(Number.isNaN(l)||l<0)){ey("KM değeri ge\xe7ersiz");return}let a=[];ex.km&&a.push("km=".concat(l)),ex.note.trim()&&a.push(ex.note.trim());let r=a.join("; "),i={vehicle_id:A,doc_type:ex.mnt_type,valid_from:ex.date,valid_to:ex.date,note:r||null,admin_password:K};try{eh(!0);let t=await fetch((0,s.J)("/api/documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!t.ok){var d;let e=await t.json().catch(()=>({}));throw Error(null!==(d=e.detail)&&void 0!==d?d:"Bakım kaydı eklenemedi")}ep({mnt_type:"service_oil",date:"",km:"",note:""}),D("Bakım kaydı oluşturuldu"),await e((0,s.J)("/api/vehicles")),await eN()}catch(e){console.error(e),ey(e.message)}finally{eh(!1)}},eO=async(t,l)=>{if(t.preventDefault(),em(null),!K.trim()){em("Şifre gerekli");return}if(!ed.valid_to){em("Bitiş tarihi zorunlu");return}let a={doc_type:ed.doc_type.trim(),valid_from:ed.valid_from||null,valid_to:ed.valid_to,note:ed.note.trim()||null,admin_password:K};try{ec(!0);let t=await fetch((0,s.J)("/api/documents/".concat(l)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){var r;let e=await t.json().catch(()=>({}));throw Error(null!==(r=e.detail)&&void 0!==r?r:"Belge g\xfcncellenemedi")}D("Belge g\xfcncellendi"),ee(null),await e((0,s.J)("/api/vehicles")),await eN()}catch(e){console.error(e),em(e.message)}finally{ec(!1)}},eR=async e=>{if(!K.trim()){D("Belge silmek i\xe7in şifre girin");return}if(confirm("Belgeyi silmek istediğinize emin misiniz?")){I(e);try{let l=await fetch((0,s.J)("/api/documents/".concat(e,"?admin_password=").concat(encodeURIComponent(K))),{method:"DELETE"});if(!l.ok){var t;let e=await l.json().catch(()=>({}));throw Error(null!==(t=e.detail)&&void 0!==t?t:"Belge silinemedi")}D("Belge silindi"),await eN()}catch(e){console.error(e),D(e.message)}finally{I(null)}}},eq=e=>{var t;let l=(null!==(t=e.documents)&&void 0!==t?t:[]).filter(e=>"service_oil"===e.doc_type||"service_general"===e.doc_type);if(0===l.length)return null;l.map(e=>{var t,l;return{d:e,date:null!==(l=null!==(t=e.valid_from)&&void 0!==t?t:e.valid_to)&&void 0!==l?l:null}}).filter(e=>!!e.date);let a=null;for(let e of l){let t=m(e.note);null!=t&&(null==a||t>a)&&(a=t)}return null!=a?a:null};return(0,a.jsxs)("section",{className:"space-y-10 max-w-7xl mx-auto px-3 sm:px-4 md:px-6",children:[(0,a.jsxs)("header",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-semibold text-white",children:"Ara\xe7 Y\xf6netimi"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Ara\xe7ları ekleyin, kaldırın ve yaklaşan belge bitişlerini takip edin. Bakım ve KM girişleri i\xe7in aşağıdaki formları kullanın."})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Belge Sayıları"}),(0,a.jsxs)("div",{className:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-300",children:["Toplam Belge: ",(0,a.jsx)("span",{className:"font-semibold text-white",children:eS})]})]}),(0,a.jsx)("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6",children:e_.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-700 bg-slate-950/70 px-3 py-2",children:[(0,a.jsx)("span",{className:"text-sm text-slate-300",children:e.label}),(0,a.jsx)("span",{className:"ml-3 rounded-md bg-slate-800 px-2 py-0.5 text-sm font-semibold text-white",children:e.count})]},e.value))})]}),T?(0,a.jsx)("div",{className:"rounded-lg border border-emerald-500/40 bg-emerald-900/40 px-4 py-3 text-sm text-emerald-100",children:T}):null,(0,a.jsxs)("div",{className:"grid gap-6 sm:gap-7 lg:grid-cols-[2fr_3fr]",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yeni Ara\xe7 Ekle"}),(0,a.jsx)("p",{className:"mb-4 text-sm text-slate-400",children:"Silme veya belge işlemleri i\xe7in sağ \xfcstteki şifre alanını kullanın."}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eL,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Plaka*",(0,a.jsx)("input",{value:w.plate,onChange:e=>eC("plate",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"34ABC123",required:!0})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Marka",(0,a.jsx)("input",{value:w.make,onChange:e=>eC("make",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"Volvo"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Model",(0,a.jsx)("input",{value:w.model,onChange:e=>eC("model",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"FH16"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Yıl",(0,a.jsx)("input",{value:w.year,onChange:e=>eC("year",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"2024",inputMode:"numeric"})]})]}),C?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:C}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Şifre girilmediği i\xe7in bu form pasif durumdadır."}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:_||!ev,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:opacity-60",children:_?"Kaydediliyor...":"Ara\xe7 Ekle"})})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yaklaşan Bitişler (60 g\xfcn)"}),(0,a.jsx)("span",{className:"rounded-full bg-slate-800 px-2.5 sm:px-3 py-0.5 sm:py-1 text-xs text-slate-300",children:v?"Y\xfckleniyor":"".concat(g.length," belge")})]}),v?(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Yaklaşan belgeler y\xfckleniyor..."}):0===g.length?(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"\xd6n\xfcm\xfczdeki 60 g\xfcnde s\xfcresi dolacak belge bulunmuyor."}):(0,a.jsx)("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:g.map(e=>(0,a.jsxs)("article",{className:"rounded-lg border px-4 py-3 text-sm text-white shadow-sm ".concat(p(e.status,"bg-slate-900 border-slate-700")),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-white/70",children:[(0,a.jsx)("span",{children:e.plate}),(0,a.jsx)("span",{children:b(e.days_left)})]}),(0,a.jsx)("div",{className:"mt-2 text-sm font-semibold capitalize",children:u(e.doc_type)}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-white/80",children:["Bitiş Tarihi: ",new Date(e.valid_to).toLocaleDateString("tr-TR")]}),e.valid_from?(0,a.jsxs)("div",{className:"text-xs text-white/60",children:["Başlangı\xe7: ",new Date(e.valid_from).toLocaleDateString("tr-TR")]}):null,e.note?(0,a.jsxs)("div",{className:"text-xs text-white/60",children:["Not: ",e.note]}):null]},e.doc_id))}),(0,a.jsxs)("div",{className:"mt-8 border-t border-slate-800 pt-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Belge Oluştur"}),(0,a.jsx)("p",{className:"mb-4 text-sm text-slate-400",children:"Muayene, sigorta gibi belgelerin başlangı\xe7/bitiş tarihlerini girerek takibe ekleyin."}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eJ,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ara\xe7*",(0,a.jsxs)("select",{value:null!=A?A:"",onChange:e=>L(Number(e.target.value)||null),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Ara\xe7 se\xe7in"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," ",e.make?"- ".concat(e.make):""]},e.id))]})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Belge T\xfcr\xfc*",(0,a.jsx)("select",{value:Y.doc_type,onChange:e=>eB("doc_type",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ge\xe7erlilik Başlangıcı",(0,a.jsx)("input",{type:"date",value:Y.valid_from,onChange:e=>eB("valid_from",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none"})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ge\xe7erlilik Bitişi*",(0,a.jsx)("input",{type:"date",value:Y.valid_to,onChange:e=>eB("valid_to",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0})]}),(0,a.jsxs)("label",{className:"md:col-span-2 text-sm text-slate-300",children:["Not",(0,a.jsx)("textarea",{value:Y.note,onChange:e=>eB("note",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:border-slate-500 focus:outline-none",rows:3,placeholder:"\xd6rn. Muayene randevusu alınacak"})]})]}),R?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:R}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Belge eklemek i\xe7in \xf6nce şifre girin."}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:P||!ev,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-blue-500 disabled:cursor-not-allowed disabled:opacity-60",children:P?"Kaydediliyor...":"Belgeyi Kaydet"})})]})]}),(0,a.jsxs)("div",{className:"mt-8 border-t border-slate-800 pt-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Bakım Kaydı Oluştur (KM ile)"}),(0,a.jsxs)("p",{className:"mb-4 text-sm text-slate-400",children:["Yağ bakımı / genel bakım i\xe7in tarih ve KM girin. KM bilgisi not i\xe7inde saklanır (\xf6r. ",(0,a.jsx)("code",{children:"km=185000"}),")."]}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:eP,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Ara\xe7*",(0,a.jsxs)("select",{value:null!=A?A:"",onChange:e=>L(Number(e.target.value)||null),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Ara\xe7 se\xe7in"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," ",e.make?"- ".concat(e.make):""]},e.id))]})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Bakım T\xfcr\xfc*",(0,a.jsx)("select",{value:ex.mnt_type,onChange:e=>eK("mnt_type",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0,children:n.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["Bakım Tarihi*",(0,a.jsx)("input",{type:"date",value:ex.date,onChange:e=>eK("date",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",required:!0})]}),(0,a.jsxs)("label",{className:"text-sm text-slate-300",children:["KM",(0,a.jsx)("input",{value:ex.km,onChange:e=>eK("km",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-white focus:border-slate-500 focus:outline-none",placeholder:"\xd6rn. 185000",inputMode:"numeric"})]}),(0,a.jsxs)("label",{className:"md:col-span-2 text-sm text-slate-300",children:["Not",(0,a.jsx)("textarea",{value:ex.note,onChange:e=>eK("note",e.target.value),className:"mt-1 w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-white focus:border-slate-500 focus:outline-none",rows:3,placeholder:"\xd6rn. Filtreler değişti"})]})]}),eg?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:eg}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-xs text-slate-400",children:"Bakım eklemek i\xe7in \xf6nce şifre girin."}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:eb||!ev,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:eb?"Kaydediliyor...":"Bakımı Kaydet"})})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/70 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"mb-4 flex flex-col gap-3 sm:gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Ara\xe7 Listesi"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Arama kutusunu kullanarak plakaya, marka veya modele g\xf6re filtreleyin. Şifre girilmezse sayfa salt okunur modda kalır."}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,a.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-medium ".concat(ev?"bg-emerald-600/20 text-emerald-300":"bg-slate-800 text-slate-400"),children:ev?"Y\xf6netici modu aktif":"Salt okunur mod"}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=window.prompt("Y\xf6netici şifresini girin (salt okunur i\xe7in boş bırakın)",K);null!==e&&(z(e.trim()),B(null),q(null),ey(null))},className:"rounded-full border border-slate-600 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-400 hover:text-white",children:ev?"Şifreyi değiştir":"Şifre gir"}),(0,a.jsx)("button",{type:"button",onClick:()=>el(e=>!e),disabled:!ev,className:"rounded-full border px-3 py-1 text-xs transition ".concat(et?"border-sky-400 bg-sky-500/20 text-sky-100":"border-slate-600 text-slate-200 hover:border-slate-400 hover:text-white"," disabled:cursor-not-allowed disabled:opacity-60"),title:"T\xfcm sayfada d\xfczenleme modunu a\xe7/kapat",children:et?"D\xfczenlemeyi kapat":"D\xfczenle"}),et?(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 pl-1",children:[(0,a.jsxs)("label",{className:"text-xs text-slate-400",children:["Sırala:",(0,a.jsxs)("select",{value:ea,onChange:e=>es(e.target.value),className:"ml-1 rounded-md border border-slate-600 bg-slate-950 px-2 py-1 text-xs text-white",children:[(0,a.jsx)("option",{value:"plate",children:"Plaka"}),(0,a.jsx)("option",{value:"make",children:"Marka"}),(0,a.jsx)("option",{value:"model",children:"Model"}),(0,a.jsx)("option",{value:"year",children:"Yıl"}),(0,a.jsx)("option",{value:"next_valid_to",children:"Bitiş Tarihi"})]})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-400",children:["Y\xf6n:",(0,a.jsxs)("select",{value:er,onChange:e=>ei(e.target.value),className:"ml-1 rounded-md border border-slate-600 bg-slate-950 px-2 py-1 text-xs text-white",children:[(0,a.jsx)("option",{value:"asc",children:"Artan"}),(0,a.jsx)("option",{value:"desc",children:"Azalan"})]})]})]}):null]})]}),(0,a.jsx)("input",{value:j,onChange:e=>N(e.target.value),placeholder:"Plaka, marka veya model ara...",className:"w-full rounded-lg border border-slate-700 bg-slate-950 px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:border-slate-500 focus:outline-none md:w-72"})]}),(0,a.jsx)("div",{className:"sm:hidden space-y-3",children:c?(0,a.jsx)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4 text-slate-400",children:"Ara\xe7lar y\xfckleniyor..."}):0===ew.length?(0,a.jsx)("div",{className:"rounded-lg border border-slate-800 bg-slate-900/60 p-4 text-slate-400",children:"Sonu\xe7 bulunamadı."}):ew.map(e=>{var t,l,s,r,i;let n=eq(e);return(0,a.jsxs)("article",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-base font-semibold text-white break-words",children:e.plate}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 break-words",children:[(null!==(t=e.make)&&void 0!==t?t:"").trim()||(null!==(l=e.model)&&void 0!==l?l:"").trim()?"".concat(null!==(s=e.make)&&void 0!==s?s:""," ").concat(null!==(r=e.model)&&void 0!==r?r:"").trim():"-",e.year?" • ".concat(e.year):""]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-end",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eT(e),disabled:!ev,className:"shrink-0 rounded-md border border-sky-500/60 px-2.5 py-1 text-[11px] font-medium text-sky-200 transition hover:bg-sky-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),(0,a.jsx)("button",{onClick:()=>eY(e.id),disabled:M===e.id||!ev,className:"shrink-0 rounded-md border border-rose-500/60 px-2.5 py-1 text-[11px] font-medium text-rose-200 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:M===e.id?"Siliniyor...":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-300",children:[(0,a.jsxs)("div",{className:"rounded-md border px-2 py-1 ".concat(p(null!==(i=e.next_status)&&void 0!==i?i:null!=e.days_left&&e.days_left>=0?e.days_left<=7?"critical":e.days_left<=30?"warning":"ok":null!=e.days_left&&e.days_left<0?"expired":"unknown","bg-slate-900 border-slate-700")),children:[(0,a.jsx)("div",{className:"font-semibold",children:e.next_valid_to?new Date(e.next_valid_to).toLocaleDateString("tr-TR"):"Belge yok"}),(0,a.jsx)("div",{className:"text-white/80",children:b(e.days_left)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1",children:[(0,a.jsx)("div",{className:"text-white/80",children:"Son KM"}),(0,a.jsx)("div",{className:"font-semibold text-white",children:null!=n?"".concat(n.toLocaleString("tr-TR")," km"):"-"})]})]}),e.documents.length>0?(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[e.documents.slice(0,3).map(t=>(0,a.jsxs)("div",{className:"rounded-lg border px-3 py-2 ".concat(p(t.status,"bg-slate-900/80 border-slate-700")),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 text-[11px] uppercase tracking-wide text-white/70",children:[(0,a.jsx)("span",{className:"truncate",children:u(t.doc_type)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,a.jsx)("span",{children:b(t.days_left)}),(0,a.jsx)("button",{type:"button",onClick:()=>ez(t),disabled:!ev,className:"rounded-md border border-sky-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-sky-100 transition hover:bg-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),(0,a.jsx)("button",{onClick:()=>eR(t.id),disabled:U===t.id||!ev,className:"rounded-md border border-rose-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-rose-100 transition hover:bg-rose-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:U===t.id?"Siliniyor":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap gap-x-4 gap-y-1 text-[11px] text-white/80",children:[(0,a.jsxs)("span",{children:["Bitiş: ",t.valid_to?new Date(t.valid_to).toLocaleDateString("tr-TR"):"-"]}),t.valid_from?(0,a.jsxs)("span",{children:["Başlangı\xe7: ",new Date(t.valid_from).toLocaleDateString("tr-TR")]}):null,t.note?(0,a.jsxs)("span",{className:"break-words",children:["Not: ",t.note]}):null]}),et||Z===t.id?(0,a.jsxs)("form",{className:"mt-2 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-2",onSubmit:e=>eO(e,t.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["T\xfcr",(0,a.jsx)("select",{value:ed.doc_type,onChange:e=>eA("doc_type",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Başlangı\xe7",(0,a.jsx)("input",{type:"date",value:ed.valid_from,onChange:e=>eA("valid_from",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2 sm:col-span-1",children:["Bitiş*",(0,a.jsx)("input",{type:"date",value:ed.valid_to,onChange:e=>eA("valid_to",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2",children:["Not",(0,a.jsx)("textarea",{value:ed.note,onChange:e=>eA("note",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",rows:2})]})]}),eu?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:eu}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{ee(null),em(null)},className:"rounded-md border border-slate-600 px-2 py-1 text-[11px] text-slate-200",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:eo||!ev,className:"rounded-md bg-sky-600 px-3 py-1 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:eo?"Kaydediliyor...":"Kaydet"})]})]}):null]},"".concat(e.id,"-").concat(t.id))),e.documents.length>3?(0,a.jsxs)("div",{className:"text-[11px] text-slate-400",children:["+",e.documents.length-3," belge daha"]}):null]}):null,et||G===e.id?(0,a.jsxs)("form",{className:"mt-3 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-3",onSubmit:t=>eE(t,e.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-2",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 col-span-2",children:["Plaka*",(0,a.jsx)("input",{value:H.plate,onChange:e=>eD("plate",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Marka",(0,a.jsx)("input",{value:H.make,onChange:e=>eD("make",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Model",(0,a.jsx)("input",{value:H.model,onChange:e=>eD("model",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Yıl",(0,a.jsx)("input",{value:H.year,onChange:e=>eD("year",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",inputMode:"numeric"})]})]}),$?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:$}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:eM,className:"rounded-md border border-slate-600 px-3 py-1 text-[11px] text-slate-200",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:W||!ev,className:"rounded-md bg-sky-600 px-4 py-1.5 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:W?"Kaydediliyor...":"Kaydet"})]})]}):null]},e.id)})}),(0,a.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-800 text-sm text-slate-200",children:[(0,a.jsx)("thead",{className:"bg-slate-800/80 text-xs uppercase tracking-wide text-slate-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Plaka"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Marka/Model"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Belge Durumu"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Son KM"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Eklenme"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"İşlemler"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-800",children:c?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-4 py-4 text-center text-slate-400",colSpan:6,children:"Ara\xe7lar y\xfckleniyor..."})}):0===ew.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-4 py-4 text-center text-slate-400",colSpan:6,children:"Sonu\xe7 bulunamadı."})}):ew.map(e=>{var t,l,s,r,i;let n=eq(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-slate-800/60",children:[(0,a.jsx)("td",{className:"px-4 py-4 font-semibold text-white",children:e.plate}),(0,a.jsxs)("td",{className:"px-4 py-4",children:[(0,a.jsx)("div",{className:"text-white",children:(null!==(t=e.make)&&void 0!==t?t:"").trim()||(null!==(l=e.model)&&void 0!==l?l:"").trim()?"".concat(null!==(s=e.make)&&void 0!==s?s:""," ").concat(null!==(r=e.model)&&void 0!==r?r:"").trim():"-"}),e.year?(0,a.jsx)("div",{className:"text-xs text-slate-500",children:e.year}):null]}),(0,a.jsxs)("td",{className:"px-4 py-4",children:[(0,a.jsxs)("div",{className:"inline-flex min-w-[10rem] flex-col rounded-lg border px-3 py-2 text-xs ".concat(p(null!==(i=e.next_status)&&void 0!==i?i:null!=e.days_left&&e.days_left>=0?e.days_left<=7?"critical":e.days_left<=30?"warning":"ok":null!=e.days_left&&e.days_left<0?"expired":"unknown","bg-slate-900 border-slate-700")),children:[(0,a.jsx)("span",{className:"font-semibold",children:e.next_valid_to?new Date(e.next_valid_to).toLocaleDateString("tr-TR"):"Belge bulunmuyor"}),(0,a.jsx)("span",{className:"text-white/80",children:b(e.days_left)}),(0,a.jsxs)("span",{className:"text-white/60",children:["Toplam belge: ",e.document_count]})]}),e.documents.length>0?(0,a.jsx)("div",{className:"mt-3 space-y-2 text-xs text-white/80",children:e.documents.map(t=>(0,a.jsxs)("div",{className:"rounded-lg border px-3 py-2 ".concat(p(t.status,"bg-slate-900/80 border-slate-700")),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-wide text-white/70",children:[(0,a.jsx)("span",{children:u(t.doc_type)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:b(t.days_left)}),(0,a.jsx)("button",{type:"button",onClick:()=>ez(t),disabled:!ev,className:"rounded-md border border-sky-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-sky-100 transition hover:bg-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),(0,a.jsx)("button",{onClick:()=>eR(t.id),disabled:U===t.id||!ev,className:"rounded-md border border-rose-400/60 px-2 py-0.5 text-[10px] uppercase tracking-wide text-rose-100 transition hover:bg-rose-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:U===t.id?"Siliniyor":"Sil"})]})]}),(0,a.jsxs)("div",{className:"mt-1 flex flex-col gap-1 text-[11px] text-white/80",children:[(0,a.jsxs)("span",{children:["Bitiş: ",t.valid_to?new Date(t.valid_to).toLocaleDateString("tr-TR"):"-"]}),t.valid_from?(0,a.jsxs)("span",{children:["Başlangı\xe7: ",new Date(t.valid_from).toLocaleDateString("tr-TR")]}):null,t.note?(0,a.jsxs)("span",{children:["Not: ",t.note]}):null]}),et||Z===t.id?(0,a.jsxs)("form",{className:"mt-2 space-y-2 rounded-md border border-slate-600 bg-slate-900/80 p-3",onSubmit:e=>eO(e,t.id),children:[(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-4",children:[(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["T\xfcr",(0,a.jsx)("select",{value:ed.doc_type,onChange:e=>eA("doc_type",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Başlangı\xe7",(0,a.jsx)("input",{type:"date",value:ed.valid_from,onChange:e=>eA("valid_from",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white"})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300",children:["Bitiş*",(0,a.jsx)("input",{type:"date",value:ed.valid_to,onChange:e=>eA("valid_to",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-[11px] text-slate-300 md:col-span-4",children:["Not",(0,a.jsx)("textarea",{value:ed.note,onChange:e=>eA("note",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-white",rows:2})]})]}),eu?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-2 py-1 text-[11px] text-rose-100",children:eu}):null,ev?null:(0,a.jsx)("p",{className:"rounded-md border border-slate-700 bg-slate-900 px-2 py-1 text-[10px] text-slate-400",children:"D\xfczenlemek i\xe7in şifre girin."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{ee(null),em(null)},className:"rounded-md border border-slate-600 px-3 py-1 text-[11px] text-slate-200",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:eo||!ev,className:"rounded-md bg-sky-600 px-4 py-1.5 text-[11px] font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:eo?"Kaydediliyor...":"Kaydet"})]})]}):null]},"".concat(e.id,"-").concat(t.id)))}):null]}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-slate-300",children:null!=n?"".concat(n.toLocaleString("tr-TR")," km"):"-"}),(0,a.jsx)("td",{className:"px-4 py-4 text-sm text-slate-300",children:e.created_at?new Date(e.created_at).toLocaleString("tr-TR"):"-"}),(0,a.jsxs)("td",{className:"px-4 py-4 text-right",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eT(e),disabled:!ev,className:"mr-2 rounded-lg border border-sky-500/60 px-3 py-1 text-xs font-medium text-sky-200 transition hover:bg-sky-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:"D\xfczenle"}),(0,a.jsx)("button",{onClick:()=>eY(e.id),disabled:M===e.id||!ev,className:"rounded-lg border border-rose-500/60 px-3 py-1 text-xs font-medium text-rose-200 transition hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:M===e.id?"Siliniyor...":"Sil"})]})]},e.id),et||G===e.id?(0,a.jsx)("tr",{className:"bg-slate-900/60",children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-4",children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:t=>eE(t,e.id),children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-4",children:[(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Plaka*",(0,a.jsx)("input",{value:H.plate,onChange:e=>eD("plate",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white",required:!0})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Marka",(0,a.jsx)("input",{value:H.make,onChange:e=>eD("make",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white"})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Model",(0,a.jsx)("input",{value:H.model,onChange:e=>eD("model",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white"})]}),(0,a.jsxs)("label",{className:"text-xs text-slate-300",children:["Yıl",(0,a.jsx)("input",{value:H.year,onChange:e=>eD("year",e.target.value),className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-sm text-white",inputMode:"numeric"})]})]}),$?(0,a.jsx)("p",{className:"rounded-md border border-rose-500/50 bg-rose-900/40 px-3 py-2 text-sm text-rose-100",children:$}):null,(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:eM,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm text-slate-200",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:W||!ev,className:"rounded-md bg-sky-600 px-4 py-1.5 text-sm font-medium text-white disabled:cursor-not-allowed disabled:opacity-60",children:W?"Kaydediliyor...":"Kaydet"})]})]})})}):null]})})})]})})]})]})}},6264:function(e,t,l){"use strict";l.d(t,{J:function(){return s}});let a=(l(357).env.NEXT_PUBLIC_API_URL||"").replace(/\/$/,""),s=e=>"".concat(a).concat(e.startsWith("/")?e:"/".concat(e))}},function(e){e.O(0,[724,971,23,744],function(){return e(e.s=7854)}),_N_E=e.O()}]);