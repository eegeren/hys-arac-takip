(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4561:function(e,t,l){Promise.resolve().then(l.bind(l,6774))},6774:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return H}});var a=l(7437),s=l(7138),r=l(2265),i=l(6264);let n=[{id:"vehicles",label:"Ara\xe7lar"},{id:"vehicle-create",label:"Ara\xe7 Ekle"},{id:"assignments",label:"Zimmetler"},{id:"damages",label:"Hasarlar"},{id:"expenses",label:"Masraflar"},{id:"fuels",label:"Yakıtlar"},{id:"documents",label:"Belgeler"}],d=[{value:"inspection",label:"Muayene"},{value:"k_document",label:"K Belgesi"},{value:"traffic_insurance",label:"Trafik Sigortası"},{value:"kasko",label:"Kasko"},{value:"service_oil",label:"Yağ Bakımı"},{value:"service_general",label:"Periyodik Bakım"}],o={inspection:"Muayene",k_document:"K Belgesi",traffic_insurance:"Trafik Sigortası",kasko:"Kasko",service_oil:"Yağ Bakımı",service_general:"Periyodik Bakım"},c=e=>{var t,l;if(!e)return"";let a=e.toLowerCase();return null!==(l=null!==(t=o[a])&&void 0!==t?t:o[a.replace(/-/g,"_")])&&void 0!==l?l:a.replace(/_/g," ")},x=["Hafif","Orta","Ağır"],m=["Bakım","Onarım","Sigorta","Vergi","Yakıt","Diğer"],u={critical:"Kritik",warning:"Yaklaşıyor",ok:"Uygun",expired:"S\xfcresi Dolmuş"},p="hys-fleet-admin-password",h=e=>null!==e&&n.some(t=>t.id===e),b=e=>{switch(e){case"critical":return"bg-[#401511]/85 border-[#ff7a65]/60";case"warning":return"bg-[#3b2410]/85 border-[#ffb347]/55";case"ok":return"bg-[#1f2a12]/85 border-[#7fcf6e]/55";case"expired":return"bg-[#32130f]/85 border-[#ff8a5a]/55";default:return"bg-[#23170f]/85 border-[#f37b1f]/35"}},g=e=>{switch(e){case"critical":return"border-[#ff7a65]/70 bg-[#401511]/70 text-[#ffd0c2]";case"warning":return"border-[#ffb347]/70 bg-[#3b2410]/70 text-[#ffe0bd]";case"ok":return"border-[#7fcf6e]/70 bg-[#1f2a12]/70 text-[#d9f3ce]";case"expired":return"border-[#ff8a5a]/70 bg-[#32130f]/70 text-[#ffd3be]";default:return"border-[#f37b1f]/40 bg-[#2a1a10]/70 text-[#f4c08b]"}},f=e=>null==e?"-":e<0?"".concat(Math.abs(e)," g\xfcn ge\xe7ti"):0===e?"Bug\xfcn":"".concat(e," g\xfcn kaldı"),v=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(e),y=e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString("tr-TR")},j=e=>null==e?"":e>=1048576?"".concat((e/1048576).toFixed(1)," MB"):e>=1024?"".concat(Math.round(e/1024)," KB"):"".concat(e," B"),N=e=>{if(!e)return null;let t=new Date(e);if(Number.isNaN(t.getTime()))return null;let l=new Date;return l.setHours(0,0,0,0),t.setHours(0,0,0,0),Math.round((t.getTime()-l.getTime())/864e5)},k=e=>{let t=N(e);return null===t?{label:"Teslim tarihi belirtilmedi",badgeClass:"border-[#3B82F6]/60 bg-[#10213d] text-[#e0f2ff]",cardClass:"border-[#1E3A8A]/35 bg-[#0b1324]/85"}:t<0?{label:"Gecikmiş (".concat(Math.abs(t)," g\xfcn)"),badgeClass:"border-[#f87171]/70 bg-[#3b0f12] text-[#fee2e2]",cardClass:"border-[#fca5a5]/45 bg-[#2b1014]/85"}:0===t?{label:"Teslim tarihi bug\xfcn",badgeClass:"border-[#fbbf24]/70 bg-[#3b2a0f] text-[#fef3c7]",cardClass:"border-[#facc15]/45 bg-[#2b200d]/85"}:t<=7?{label:"Yaklaşıyor (".concat(t," g\xfcn)"),badgeClass:"border-[#3B82F6]/70 bg-[#13213a] text-[#dbeafe]",cardClass:"border-[#2563EB]/45 bg-[#101b33]/85"}:{label:"Planlı (".concat(t," g\xfcn)"),badgeClass:"border-[#34d399]/60 bg-[#0f2a21] text-[#d1fae5]",cardClass:"border-[#34d399]/35 bg-[#0a1f17]/85"}},w=/\.(png|jpe?g|gif|webp|bmp|svg)$/i,_=e=>{var t,l,a,s;if((null!==(a=null===(t=e.mimeType)||void 0===t?void 0:t.toLowerCase())&&void 0!==a?a:"").startsWith("image/"))return!0;let r=null!==(s=null===(l=e.name)||void 0===l?void 0:l.toLowerCase())&&void 0!==s?s:"";return w.test(r)},S="rounded-2xl border border-[#1E40AF]/35 bg-[#0F172A]/95 shadow-lg shadow-[#020617]/60",D="rounded-lg border border-[#1E3A8A]/40 bg-[#0B1220] px-3 py-2 text-sm text-[#e2e8f0] placeholder:text-[#94a3b8]/70 focus:border-[#3B82F6] focus:outline-none focus:ring-1 focus:ring-[#3B82F6]/40",C="text-xs uppercase tracking-[0.25em] text-[#93c5fd]/80",T="inline-flex items-center rounded-full border border-[#1E3A8A]/45 bg-[#0f1a2d]/80 px-2 py-0.5 text-xs text-[#cbd5f5]",A="inline-flex items-center justify-center rounded-lg border border-[#3B82F6]/70 bg-[#1E3A8A]/45 px-4 py-2 text-sm font-medium text-[#dbeafe] transition hover:border-[#60A5FA]/80 hover:bg-[#1d4ed8]/60 disabled:cursor-not-allowed disabled:opacity-60",B="inline-flex items-center justify-center rounded-lg border border-[#1E3A8A]/35 bg-[#101c34]/80 px-4 py-2 text-xs text-[#cbd5f5] transition hover:border-[#2563EB]/60 hover:text-white",M=e=>{if(!e)return"";if(e.length>=10)return e.slice(0,10);let t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},E=()=>({plate:"",liters:"",amount:"",refuelDate:new Date().toISOString().split("T")[0],odometer:"",note:""}),P=()=>({plate:"",personName:"",personTitle:"",vehicleMake:"",vehicleModel:"",vehicleKm:"",assignmentDate:new Date().toISOString().split("T")[0],expectedReturnDate:"",description:"",files:[]}),z=e=>{var t,l,a,s,r;return e?{plate:e.plate,personName:e.personName,personTitle:null!==(t=e.personTitle)&&void 0!==t?t:"",vehicleMake:null!==(l=e.vehicleMake)&&void 0!==l?l:"",vehicleModel:null!==(a=e.vehicleModel)&&void 0!==a?a:"",vehicleKm:null!==(s=e.vehicleKm)&&void 0!==s?s:"",assignmentDate:M(e.assignmentDate)||new Date().toISOString().slice(0,10),expectedReturnDate:M(e.expectedReturnDate),description:null!==(r=e.description)&&void 0!==r?r:"",files:[]}:P()},K=e=>new Promise((t,l)=>{let a=new FileReader;a.onload=()=>t(String(a.result)),a.onerror=()=>l(a.error),a.readAsDataURL(e)}),Y=(e,t)=>"data:".concat(null!=e?e:"application/octet-stream",";base64,").concat(t),F=e=>{var t,l,a,s,r;let i=x.includes(e.severity)?e.severity:"Hafif";return{id:e.id,plate:e.plate,title:e.title,description:null!==(t=e.description)&&void 0!==t?t:"",severity:i,occurredAt:null!==(a=null!==(l=e.occurred_at)&&void 0!==l?l:e.created_at)&&void 0!==a?a:new Date().toISOString(),createdAt:null!==(r=null!==(s=e.created_at)&&void 0!==s?s:e.occurred_at)&&void 0!==r?r:new Date().toISOString(),attachments:e.attachments.map(e=>{var t,l;return{id:e.id,name:e.file_name,mimeType:null!==(t=e.mime_type)&&void 0!==t?t:null,preview:Y(e.mime_type,e.content_base64),size:null!==(l=e.size_bytes)&&void 0!==l?l:null}})}},O=e=>{var t,l,a,s,r,i;return{id:e.id,plate:e.plate,category:e.category,amount:"number"==typeof e.amount?e.amount:Number(null!==(t=e.amount)&&void 0!==t?t:0),description:null!==(l=e.description)&&void 0!==l?l:"",createdAt:null!==(s=null!==(a=e.created_at)&&void 0!==a?a:e.expense_date)&&void 0!==s?s:new Date().toISOString(),expenseDate:null!==(i=null!==(r=e.expense_date)&&void 0!==r?r:e.created_at)&&void 0!==i?i:new Date().toISOString(),attachments:e.attachments.map(e=>{var t,l;return{id:e.id,name:e.file_name,mimeType:null!==(t=e.mime_type)&&void 0!==t?t:null,preview:Y(e.mime_type,e.content_base64),size:null!==(l=e.size_bytes)&&void 0!==l?l:null}})}},R=e=>{var t,l,a,s,r,i,n,d,o;return{id:e.id,plate:e.plate,liters:"number"==typeof e.liters?e.liters:Number(null!==(t=e.liters)&&void 0!==t?t:0),amount:"number"==typeof e.amount?e.amount:Number(null!==(l=e.amount)&&void 0!==l?l:0),refuelDate:null!==(s=null!==(a=e.refuel_date)&&void 0!==a?a:e.created_at)&&void 0!==s?s:new Date().toISOString(),createdAt:null!==(i=null!==(r=e.created_at)&&void 0!==r?r:e.refuel_date)&&void 0!==i?i:new Date().toISOString(),odometer:null!==(n=e.odometer)&&void 0!==n?n:null,note:null!==(d=e.note)&&void 0!==d?d:null,unitPrice:"number"==typeof e.unit_price?e.unit_price:e.liters?Number(null!==(o=e.amount)&&void 0!==o?o:0)/Number(e.liters||1):null}},I=e=>{var t,l,a,s,r,i,n,d,o,c;return{id:e.id,plate:e.plate,personName:e.person_name,personTitle:null!==(t=e.person_title)&&void 0!==t?t:null,vehicleMake:null!==(l=e.vehicle_make)&&void 0!==l?l:null,vehicleModel:null!==(a=e.vehicle_model)&&void 0!==a?a:null,vehicleKm:null!==(s=e.vehicle_km)&&void 0!==s?s:null,assignmentDate:null!==(i=null!==(r=e.assignment_date)&&void 0!==r?r:e.created_at)&&void 0!==i?i:new Date().toISOString(),expectedReturnDate:null!==(n=e.expected_return_date)&&void 0!==n?n:null,description:null!==(d=e.description)&&void 0!==d?d:"",createdAt:null!==(c=null!==(o=e.created_at)&&void 0!==o?o:e.assignment_date)&&void 0!==c?c:new Date().toISOString(),attachments:e.attachments.map(e=>{var t,l;return{id:e.id,name:e.file_name,mimeType:null!==(t=e.mime_type)&&void 0!==t?t:null,preview:Y(e.mime_type,e.content_base64),size:null!==(l=e.size_bytes)&&void 0!==l?l:null}})}},L=async e=>{var t;if((null!==(t=e.headers.get("content-type"))&&void 0!==t?t:"").includes("application/json"))try{let t=await e.json();if("string"==typeof(null==t?void 0:t.detail))return t.detail;if("string"==typeof(null==t?void 0:t.error))return t.error;if("string"==typeof(null==t?void 0:t.message))return t.message;return JSON.stringify(t)}catch(t){return e.statusText||"HTTP ".concat(e.status)}try{let t=await e.text();if(t)return t}catch(e){}return e.statusText||"HTTP ".concat(e.status)},J=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3500;e(t),setTimeout(()=>e(null),l)};function H(){var e,t,l,o,N,w,Y,H,Z,U,G,$,W,V,X;let[q,Q]=(0,r.useState)([]),[ee,et]=(0,r.useState)(!0),[el,ea]=(0,r.useState)(null),[es,er]=(0,r.useState)([]),[ei,en]=(0,r.useState)(!0),[ed,eo]=(0,r.useState)(null),[ec,ex]=(0,r.useState)("vehicles"),[em,eu]=(0,r.useState)(""),[ep,eh]=(0,r.useState)({plate:"",make:"",model:"",year:"",responsible_email:""}),[eb,eg]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)(null),[ey,ej]=(0,r.useState)(null),[eN,ek]=(0,r.useState)({vehicleId:"",doc_type:null!==(Y=null===(e=d[0])||void 0===e?void 0:e.value)&&void 0!==Y?Y:"inspection",valid_from:"",valid_to:"",note:""}),[ew,e_]=(0,r.useState)(!1),[eS,eD]=(0,r.useState)(null),[eC,eT]=(0,r.useState)(null),[eA,eB]=(0,r.useState)({vehicleId:"",doc_type:null!==(H=null===(t=d[0])||void 0===t?void 0:t.value)&&void 0!==H?H:"inspection",valid_from:"",valid_to:"",note:""}),[eM,eE]=(0,r.useState)(!1),[eP,ez]=(0,r.useState)(null),[eK,eY]=(0,r.useState)(null),[eF,eO]=(0,r.useState)(null),[eR,eI]=(0,r.useState)(null),[eL,eJ]=(0,r.useState)(()=>P()),[eH,eZ]=(0,r.useState)([]),[eU,eG]=(0,r.useState)(null),[e$,eW]=(0,r.useState)(null),[eV,eX]=(0,r.useState)(!1),[eq,eQ]=(0,r.useState)(()=>Date.now()),[e0,e2]=(0,r.useState)(!0),[e3,e4]=(0,r.useState)(null),[e1,e5]=(0,r.useState)(!1),[e8,e7]=(0,r.useState)(null),[e6,e9]=(0,r.useState)(!1),[te,tt]=(0,r.useState)(()=>P()),[tl,ta]=(0,r.useState)(()=>Date.now()),[ts,tr]=(0,r.useState)(null),[ti,tn]=(0,r.useState)(null),[td,to]=(0,r.useState)(!1),[tc,tx]=(0,r.useState)(null),[tm,tu]=(0,r.useState)(null),[tp,th]=(0,r.useState)(()=>({plate:"",title:"",description:"",severity:"Hafif",occurredAt:new Date().toISOString().split("T")[0],files:[]})),[tb,tg]=(0,r.useState)([]),[tf,tv]=(0,r.useState)(null),[ty,tj]=(0,r.useState)(null),[tN,tk]=(0,r.useState)(!1),[tw,t_]=(0,r.useState)(()=>Date.now()),[tS,tD]=(0,r.useState)(!0),[tC,tT]=(0,r.useState)(null),[tA,tB]=(0,r.useState)(()=>({plate:"",category:m[0],amount:"",description:"",createdAt:new Date().toISOString().split("T")[0],files:[]})),[tM,tE]=(0,r.useState)([]),[tP,tz]=(0,r.useState)(null),[tK,tY]=(0,r.useState)(null),[tF,tO]=(0,r.useState)(!1),[tR,tI]=(0,r.useState)(()=>Date.now()),[tL,tJ]=(0,r.useState)(!0),[tH,tZ]=(0,r.useState)(null),[tU,tG]=(0,r.useState)(()=>E()),[t$,tW]=(0,r.useState)([]),[tV,tX]=(0,r.useState)(null),[tq,tQ]=(0,r.useState)(null),[t0,t2]=(0,r.useState)(!1),[t3,t4]=(0,r.useState)(!0),[t1,t5]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=window.localStorage.getItem(p);e&&e.trim()&&eu(e.trim())},[]),(0,r.useEffect)(()=>{window.localStorage.setItem(p,em)},[em]),(0,r.useEffect)(()=>{let e=()=>{let e=new URLSearchParams(window.location.search).get("tab");ex(h(e)?e:"vehicles")};return e(),window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);let t8=e=>{ex(e);let t=new URL(window.location.href);"vehicles"===e?t.searchParams.delete("tab"):t.searchParams.set("tab",e),window.history.replaceState(null,"",t.toString())},t7=(0,r.useCallback)(async()=>{et(!0);try{let e=await fetch((0,i.J)("/api/documents/upcoming?days=60"));if(!e.ok)throw Error(await L(e));let t=await e.json();Q(t.map(e=>({...e,days_left:null!==e.days_left?Number(e.days_left):null}))),ea(null)}catch(e){console.error(e),ea(e.message||"Belgeler \xe7ekilirken hata oluştu")}finally{et(!1)}},[]),t6=(0,r.useCallback)(async()=>{en(!0);try{let e=await fetch((0,i.J)("/api/vehicles"));if(!e.ok)throw Error(await L(e));let t=await e.json();er(t),eo(null)}catch(e){console.error(e),eo(e.message||"Ara\xe7lar \xe7ekilirken hata oluştu")}finally{en(!1)}},[]),t9=(0,r.useCallback)(async()=>{e2(!0);try{let e=await fetch((0,i.J)("/api/assignments"));if(!e.ok)throw Error(await L(e));let t=await e.json();eZ(t.map(I)),e4(null)}catch(e){console.error(e),e4(e.message||"Zimmet kayıtları \xe7ekilirken hata oluştu")}finally{e2(!1)}},[]),le=(0,r.useCallback)(async()=>{tD(!0);try{let e=await fetch((0,i.J)("/api/damages"));if(!e.ok)throw Error(await L(e));let t=await e.json();tg(t.map(F)),tT(null)}catch(e){console.error(e),tT(e.message||"Hasar kayıtları \xe7ekilirken hata oluştu")}finally{tD(!1)}},[]),lt=(0,r.useCallback)(async()=>{tJ(!0);try{let e=await fetch((0,i.J)("/api/expenses"));if(!e.ok)throw Error(await L(e));let t=await e.json();tE(t.map(O)),tZ(null)}catch(e){console.error(e),tZ(e.message||"Masraf kayıtları \xe7ekilirken hata oluştu")}finally{tJ(!1)}},[]),ll=(0,r.useCallback)(async()=>{t4(!0);try{let e=await fetch((0,i.J)("/api/fuels"));if(!e.ok)throw Error(await L(e));let t=await e.json();tW(t.map(R)),t5(null)}catch(e){console.error(e),t5(e.message||"Yakıt kayıtları \xe7ekilirken hata oluştu")}finally{t4(!1)}},[]);(0,r.useEffect)(()=>{t7()},[t7]),(0,r.useEffect)(()=>{t6()},[t6]),(0,r.useEffect)(()=>{t9()},[t9]),(0,r.useEffect)(()=>{le()},[le]),(0,r.useEffect)(()=>{lt()},[lt]),(0,r.useEffect)(()=>{ll()},[ll]),(0,r.useEffect)(()=>{if(!tc)return;let e=e=>{"Escape"===e.key&&tx(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[tc]);let la=(0,r.useMemo)(()=>{let e=new Map;return q.forEach(t=>{var l;let a=null!==(l=e.get(t.plate))&&void 0!==l?l:{latestStatus:t.status,nextDocument:void 0,documents:[]};a.documents.push(t);let s=a.nextDocument;if(s){let e=new Date(s.valid_to).getTime();new Date(t.valid_to).getTime()<e&&(a.nextDocument=t)}else a.nextDocument=t;let r=["critical","expired","warning","ok"],i=r.indexOf(a.latestStatus),n=r.indexOf(t.status);-1!==n&&(-1===i||n<i)&&(a.latestStatus=t.status),e.set(t.plate,a)}),Array.from(e.entries()).map(e=>{let[t,l]=e;return{plate:t,latestStatus:l.latestStatus,nextDocument:l.nextDocument,documents:l.documents}}).sort((e,t)=>e.plate.localeCompare(t.plate,"tr"))},[q]),ls=async e=>{if(e.preventDefault(),ev(null),!em.trim()){ev("Y\xf6netici şifresi gerekli.");return}if(!ep.plate.trim()){ev("Plaka alanı zorunlu.");return}eg(!0);try{let e={plate:ep.plate.trim().toUpperCase(),make:ep.make.trim()||null,model:ep.model.trim()||null,year:ep.year.trim()?Number(ep.year.trim()):null,responsible_email:ep.responsible_email.trim()||null,admin_password:em.trim()},t=await fetch((0,i.J)("/api/vehicles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await L(t));eh({plate:"",make:"",model:"",year:"",responsible_email:""}),J(ej,"Ara\xe7 kaydedildi"),await t6()}catch(e){console.error(e),ev(e.message||"Ara\xe7 kaydedilemedi")}finally{eg(!1)}},lr=async function(e,t,l,a,s,r){let n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e.preventDefault(),a(null),!em.trim()){a("Y\xf6netici şifresi gerekli.");return}let d="number"==typeof n&&!Number.isNaN(n);if(!d&&!t.vehicleId){a("Ara\xe7 se\xe7melisiniz.");return}if(!t.valid_to){a("Bitiş tarihini giriniz.");return}l(!0);try{let e;if(d){let l={doc_type:t.doc_type,valid_from:t.valid_from||null,valid_to:t.valid_to,note:t.note.trim()||null,admin_password:em.trim()};e=await fetch((0,i.J)("/api/documents/".concat(n)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}else{let l={vehicle_id:Number(t.vehicleId),doc_type:t.doc_type,valid_from:t.valid_from||null,valid_to:t.valid_to,note:t.note.trim()||null,admin_password:em.trim()};e=await fetch((0,i.J)("/api/documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}if(!e.ok)throw Error(await L(e));d?(J(s,"Belge g\xfcncellendi"),ld()):(r(),J(s,"Belge kaydedildi")),await t7(),await t6()}catch(e){console.error(e),a(e.message||(d?"Belge g\xfcncellenemedi":"Belge kaydedilemedi"))}finally{l(!1)}},li=e=>{eJ(t=>{let l=t.files.filter((t,l)=>l!==e);return{...t,files:l}}),eQ(Date.now())},ln=e=>{tt(t=>{let l=t.files.filter((t,l)=>l!==e);return{...t,files:l}}),ta(Date.now())},ld=()=>{var e,t;eO(null),eI(null),eB({vehicleId:"",doc_type:null!==(t=null===(e=d[0])||void 0===e?void 0:e.value)&&void 0!==t?t:"inspection",valid_from:"",valid_to:"",note:""}),ez(null),eY(null)},lo=e=>{var t,l,a;let s=null!==(t=e.doc_id)&&void 0!==t?t:e.id,r=null!==(l=es.find(e=>{var t;return null===(t=e.documents)||void 0===t?void 0:t.some(e=>e.id===s)}))&&void 0!==l?l:es.find(t=>t.plate===e.plate),i=M(e.valid_from)||e.valid_from||"",n=M(e.valid_to)||e.valid_to||"";eB({vehicleId:r?String(r.id):"",doc_type:e.doc_type,valid_from:i,valid_to:n,note:null!==(a=e.note)&&void 0!==a?a:""}),eO(s),eI({plate:e.plate,docType:c(e.doc_type)}),ez(null),eY(null)},lc=async e=>{if(e.preventDefault(),eG(null),!em.trim()){eG("Y\xf6netici şifresi gerekli.");return}if(!eL.plate.trim()||!eL.personName.trim()){eG("Plaka ve personel adı zorunludur.");return}eX(!0);try{let e=await Promise.all(eL.files.map(async e=>{var t,l;let[a,s]=(await K(e)).split(","),r=null==a?void 0:a.match(/^data:(.*?);base64$/);return{file_name:e.name,mime_type:null!==(l=null!==(t=null==r?void 0:r[1])&&void 0!==t?t:e.type)&&void 0!==l?l:"application/octet-stream",content_base64:null!=s?s:""}})),t={plate:eL.plate.trim().toUpperCase(),person_name:eL.personName.trim(),person_title:eL.personTitle.trim()||null,vehicle_make:eL.vehicleMake.trim()||null,vehicle_model:eL.vehicleModel.trim()||null,vehicle_km:eL.vehicleKm.trim()||null,assignment_date:eL.assignmentDate,expected_return_date:eL.expectedReturnDate?eL.expectedReturnDate:null,description:eL.description.trim()||null,attachments:e,admin_password:em.trim()},l=await fetch((0,i.J)("/api/assignments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw Error(await L(l));await l.json(),await t9(),e4(null),eJ({plate:"",personName:"",personTitle:"",vehicleMake:"",vehicleModel:"",vehicleKm:"",assignmentDate:eL.assignmentDate,expectedReturnDate:eL.expectedReturnDate,description:"",files:[]}),eQ(Date.now()),J(eW,"Zimmet kaydı eklendi")}catch(e){console.error(e),eG(e.message||"Zimmet kaydedilemedi")}finally{eX(!1)}},lx=async e=>{if(!em.trim()){e4("Silmek i\xe7in y\xf6netici şifresi gerekli.");return}if(window.confirm("".concat(e.plate," kaydını silmek istediğinize emin misiniz?"))){tu(e.id);try{let t=new URLSearchParams({admin_password:em.trim()}),l=await fetch((0,i.J)("/api/assignments/".concat(e.id,"?").concat(t.toString())),{method:"DELETE"});if(!l.ok)throw Error(await L(l));eZ(t=>t.filter(t=>t.id!==e.id)),e4(null),(null==e8?void 0:e8.id)===e.id&&lu()}catch(e){console.error(e),e4(e.message||"Zimmet silinemedi")}finally{tu(null)}}},lm=e=>{tx(null);let t=z(e);e7(e),e9(!1),tr(null),tn(null),tt(t),ta(Date.now()),e5(!0)},lu=()=>{e5(!1),e7(null),e9(!1),tr(null),tn(null),tt(P()),ta(Date.now()),tx(null)},lp=async e=>{if(e.preventDefault(),e8){if(tr(null),!em.trim()){tr("Y\xf6netici şifresi gerekli.");return}if(!te.plate.trim()||!te.personName.trim()){tr("Plaka ve personel adı zorunludur.");return}to(!0);try{let e=await Promise.all(te.files.map(async e=>{var t,l;let[a,s]=(await K(e)).split(","),r=null==a?void 0:a.match(/^data:(.*?);base64$/);return{file_name:e.name,mime_type:null!==(l=null!==(t=null==r?void 0:r[1])&&void 0!==t?t:e.type)&&void 0!==l?l:"application/octet-stream",content_base64:null!=s?s:""}})),t={plate:te.plate.trim().toUpperCase(),person_name:te.personName.trim(),person_title:te.personTitle.trim()||null,vehicle_make:te.vehicleMake.trim()||null,vehicle_model:te.vehicleModel.trim()||null,vehicle_km:te.vehicleKm.trim()||null,assignment_date:te.assignmentDate||null,expected_return_date:te.expectedReturnDate?te.expectedReturnDate:null,description:te.description.trim()||null,attachments:e,admin_password:em.trim()},l=await fetch((0,i.J)("/api/assignments/".concat(e8.id)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw Error(await L(l));let a=await l.json(),s=I(a);eZ(e=>e.map(e=>e.id===s.id?s:e)),e7(s),tt(z(s)),ta(Date.now()),e9(!1),J(tn,"Zimmet g\xfcncellendi"),await t9()}catch(e){console.error(e),tr(e.message||"Zimmet g\xfcncellenemedi")}finally{to(!1)}}},lh=async e=>{if(e.preventDefault(),tv(null),!em.trim()){tv("Y\xf6netici şifresi gerekli.");return}if(!tp.plate.trim()||!tp.title.trim()){tv("Plaka ve başlık alanları zorunlu.");return}tk(!0);try{let e=await Promise.all(tp.files.map(async e=>{var t,l;let[a,s]=(await K(e)).split(","),r=null==a?void 0:a.match(/^data:(.*?);base64$/);return{file_name:e.name,mime_type:null!==(l=null!==(t=null==r?void 0:r[1])&&void 0!==t?t:e.type)&&void 0!==l?l:"application/octet-stream",content_base64:null!=s?s:""}})),t={plate:tp.plate.trim().toUpperCase(),title:tp.title.trim(),description:tp.description.trim()||null,severity:tp.severity,occurred_at:tp.occurredAt,attachments:e,admin_password:em.trim()},l=await fetch((0,i.J)("/api/damages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw Error(await L(l));await l.json(),await le(),tT(null),th({plate:"",title:"",description:"",severity:tp.severity,occurredAt:tp.occurredAt,files:[]}),t_(Date.now()),J(tj,"Hasar kaydı eklendi")}catch(e){console.error(e),tv(e.message||"Hasar kaydedilemedi")}finally{tk(!1)}},lb=async e=>{if(e.preventDefault(),tz(null),!em.trim()){tz("Y\xf6netici şifresi gerekli.");return}if(!tA.plate.trim()){tz("Plaka alanı zorunlu.");return}let t=Number(tA.amount.replace(",","."));if(!Number.isFinite(t)||t<=0){tz("Ge\xe7erli bir tutar giriniz.");return}tO(!0);try{let e=await Promise.all(tA.files.map(async e=>{var t,l;let[a,s]=(await K(e)).split(","),r=null==a?void 0:a.match(/^data:(.*?);base64$/);return{file_name:e.name,mime_type:null!==(l=null!==(t=null==r?void 0:r[1])&&void 0!==t?t:e.type)&&void 0!==l?l:"application/octet-stream",content_base64:null!=s?s:""}})),l={plate:tA.plate.trim().toUpperCase(),category:tA.category,amount:t,description:tA.description.trim()||null,expense_date:tA.createdAt,attachments:e,admin_password:em.trim()},a=await fetch((0,i.J)("/api/expenses"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a.ok)throw Error(await L(a));await a.json(),await lt(),tZ(null),tB({plate:"",category:tA.category,amount:"",description:"",createdAt:tA.createdAt,files:[]}),tI(Date.now()),J(tY,"Masraf kaydı eklendi")}catch(e){console.error(e),tz(e.message||"Masraf kaydedilemedi")}finally{tO(!1)}},lg=(0,r.useMemo)(()=>tM.reduce((e,t)=>e+(Number.isFinite(t.amount)?t.amount:0),0),[tM]),lf=async e=>{if(e.preventDefault(),tX(null),!em.trim()){tX("Y\xf6netici şifresi gerekli.");return}if(!tU.plate.trim()){tX("Plaka alanı zorunlu.");return}let t=Number(tU.liters.replace(",","."));if(!Number.isFinite(t)||t<=0){tX("Ge\xe7erli bir litre bilgisi giriniz.");return}let l=Number(tU.amount.replace(",","."));if(!Number.isFinite(l)||l<0){tX("Ge\xe7erli bir tutar giriniz.");return}let a=tU.odometer.trim(),s=a?Number(a.replace(",","")):null;if(null!==s&&(!Number.isFinite(s)||s<0)){tX("Ge\xe7erli bir kilometre değeri giriniz.");return}t2(!0);try{let e={plate:tU.plate.trim().toUpperCase(),liters:t,amount:l,refuel_date:tU.refuelDate,odometer:null!==s?Math.round(s):null,note:tU.note.trim()||null,admin_password:em.trim()},a=await fetch((0,i.J)("/api/fuels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error(await L(a));await a.json(),await ll(),t5(null),tG(e=>({...e,plate:"",liters:"",amount:"",note:"",odometer:null!==s?String(Math.round(s)):""})),J(tQ,"Yakıt kaydı eklendi")}catch(e){console.error(e),tX(e.message||"Yakıt kaydedilemedi")}finally{t2(!1)}},lv=(0,r.useMemo)(()=>t$.reduce((e,t)=>e+(Number.isFinite(t.amount)?t.amount:0),0),[t$]),ly=(0,r.useMemo)(()=>t$.reduce((e,t)=>e+(Number.isFinite(t.liters)?t.liters:0),0),[t$]),lj=(()=>{if("vehicles"===ec)return(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Ara\xe7 Listesi"}),(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:["Filodaki t\xfcm ara\xe7lar ve yaklaşan belge durumları. Toplam ",es.length," ara\xe7 g\xf6r\xfcn\xfcyor."]})]}),(0,a.jsx)(s.default,{href:"/vehicles",className:"inline-flex items-center justify-center rounded-full border border-emerald-400/40 bg-emerald-500/20 px-4 py-2 text-sm font-medium text-emerald-100 transition hover:border-emerald-300/70 hover:bg-emerald-500/30",children:"Ayrıntılı Ara\xe7 Y\xf6netimi"})]}),ed?(0,a.jsx)("p",{className:"rounded-lg border border-rose-500/40 bg-rose-900/40 p-4 text-sm text-rose-100",children:ed}):null,(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-800 bg-slate-900/80 shadow-lg shadow-slate-950/40",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-800 text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-900/60 text-xs uppercase tracking-wider text-slate-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Plaka"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Marka / Model"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Yıl"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Belge Sayısı"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Son Belge"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Durum"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Sorumlu"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-800/80 text-slate-200",children:ei?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Ara\xe7 listesi y\xfckleniyor..."})}):0===es.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Hen\xfcz ara\xe7 kaydı bulunmuyor."})}):es.map(e=>{var t,l,s;return(0,a.jsxs)("tr",{className:"hover:bg-slate-800/60",children:[(0,a.jsx)("td",{className:"px-4 py-3 font-semibold text-white",children:e.plate}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:[e.make,e.model].filter(Boolean).join(" ")||"-"}),e.created_at?(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:["Kayıt: ",new Date(e.created_at).toLocaleDateString("tr-TR")]}):null]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:null!==(t=e.year)&&void 0!==t?t:"-"}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.document_count}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.next_valid_to?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:new Date(e.next_valid_to).toLocaleDateString("tr-TR")}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:f(e.days_left)})]}):"-"}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium ".concat(g(e.next_status)),children:e.next_status?null!==(l=u[e.next_status])&&void 0!==l?l:e.next_status:"Belge Yok"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-slate-300",children:null!==(s=e.responsible_email)&&void 0!==s?s:"-"})]},e.id)})})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yaklaşan belgeler (60 g\xfcn)"}),(0,a.jsx)("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:ee?(0,a.jsx)("p",{className:"rounded-lg border border-slate-700 bg-slate-800/70 p-4 text-slate-300",children:"Belge verileri y\xfckleniyor..."}):0===la.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-700 bg-slate-800/70 p-4 text-slate-300",children:"Yakın tarihte yenilecek belge bulunmuyor."}):la.map(e=>{var t;return(0,a.jsx)("article",{className:"rounded-xl border shadow-lg shadow-slate-900/40 transition hover:-translate-y-1 hover:shadow-slate-800/60 ".concat(b(e.latestStatus)),children:(0,a.jsxs)("div",{className:"space-y-3 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm uppercase tracking-wide text-white/70",children:"Plaka"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-white",children:e.plate})]}),e.nextDocument?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-wide text-white/70",children:"Sıradaki Belge"}),(0,a.jsx)("h3",{className:"text-lg font-semibold capitalize text-white",children:c(e.nextDocument.doc_type)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-white/80",children:[(0,a.jsx)("span",{children:"Bitiş Tarihi"}),(0,a.jsx)("span",{children:new Date(e.nextDocument.valid_to).toLocaleDateString("tr-TR")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-white",children:[(0,a.jsx)("span",{children:"Kalan G\xfcn"}),(0,a.jsx)("span",{children:null!==(t=e.nextDocument.days_left)&&void 0!==t?t:"-"})]})]}):(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Takvimde yaklaşan belge bulunmuyor."})]})},e.plate)})})]})]});if("vehicle-create"===ec)return(0,a.jsxs)("section",{className:"space-y-8",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Ara\xe7 ve Belge Y\xf6netimi"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Yeni ara\xe7 kaydı oluşturun ve aynı ekrandan belge ekleyin. Y\xf6netici şifresi t\xfcm işlemler i\xe7in gereklidir."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("form",{className:"flex flex-col gap-3 ".concat(S," p-5"),onSubmit:ls,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#fcd6ac]",children:"Ara\xe7 Ekle"}),(0,a.jsx)("p",{className:"text-xs text-[#f3b375]/80",children:"Plaka, marka ve sorumlu bilgilerini girin."})]}),(0,a.jsx)("label",{className:C,children:"Plaka"}),(0,a.jsx)("input",{className:D,placeholder:"34 ABC 123",value:ep.plate,onChange:e=>eh(t=>({...t,plate:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Marka"}),(0,a.jsx)("input",{className:D,placeholder:"\xd6rn. Ford",value:ep.make,onChange:e=>eh(t=>({...t,make:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Model"}),(0,a.jsx)("input",{className:D,placeholder:"\xd6rn. Transit",value:ep.model,onChange:e=>eh(t=>({...t,model:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Yıl"}),(0,a.jsx)("input",{className:D,placeholder:"2020",value:ep.year,onChange:e=>eh(t=>({...t,year:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Sorumlu E-posta"}),(0,a.jsx)("input",{className:D,placeholder:"ornek@firma.com",type:"email",value:ep.responsible_email,onChange:e=>eh(t=>({...t,responsible_email:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:D,placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)}),ef?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:ef}):null,ey?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:ey}):null,(0,a.jsx)("button",{type:"submit",disabled:eb,className:"".concat(A," mt-2"),children:eb?"Kaydediliyor...":"Ara\xe7 Kaydet"})]}),(0,a.jsxs)("form",{className:"flex flex-col gap-3 ".concat(S," p-5"),onSubmit:e=>lr(e,eN,e_,eD,eT,()=>ek({vehicleId:"",doc_type:eN.doc_type,valid_from:"",valid_to:"",note:""})),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#fcd6ac]",children:"Belge Ekle"}),(0,a.jsx)("p",{className:"text-xs text-[#f3b375]/80",children:"Mevcut ara\xe7 i\xe7in hızla belge oluşturun."})]}),(0,a.jsx)("label",{className:C,children:"Ara\xe7"}),(0,a.jsxs)("select",{className:"".concat(D," text-[#fbe4cc]"),value:eN.vehicleId,onChange:e=>ek(t=>({...t,vehicleId:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"Ara\xe7 se\xe7in"}),es.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," (",[e.make,e.model].filter(Boolean).join(" ")||"Model belirtilmedi",")"]},e.id))]}),(0,a.jsx)("label",{className:C,children:"Belge T\xfcr\xfc"}),(0,a.jsx)("select",{className:"".concat(D," text-[#fbe4cc]"),value:eN.doc_type,onChange:e=>ek(t=>({...t,doc_type:e.target.value})),children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("label",{className:C,children:"Başlangı\xe7 Tarihi"}),(0,a.jsx)("input",{type:"date",className:D,value:eN.valid_from,onChange:e=>ek(t=>({...t,valid_from:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Bitiş Tarihi"}),(0,a.jsx)("input",{type:"date",className:D,value:eN.valid_to,onChange:e=>ek(t=>({...t,valid_to:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Not"}),(0,a.jsx)("textarea",{className:"".concat(D," min-h-[80px]"),placeholder:"İsteğe bağlı a\xe7ıklama",value:eN.note,onChange:e=>ek(t=>({...t,note:e.target.value}))}),(0,a.jsx)("label",{className:C,children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:D,placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)}),eS?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:eS}):null,eC?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:eC}):null,(0,a.jsx)("button",{type:"submit",disabled:ew,className:"mt-2 inline-flex items-center justify-center rounded-lg border border-sky-400/40 bg-sky-500/20 px-4 py-2 text-sm font-medium text-sky-100 transition hover:border-sky-300/70 hover:bg-sky-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:ew?"Kaydediliyor...":"Belge Kaydet"})]})]})]});if("assignments"===ec)return(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Ara\xe7 Zimmetleri"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Personellere teslim edilen ara\xe7ları kaydedin, teslim fotoğraflarını ekleyin."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.05fr)_minmax(0,1fr)]",children:[(0,a.jsxs)("form",{className:"flex flex-col gap-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",onSubmit:lc,children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Zimmet Kaydı Oluştur"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Ara\xe7 teslimini t\xfcm detaylarıyla kaydedin."})]}),(0,a.jsx)("div",{className:"rounded-lg border border-[#2563EB]/35 bg-[#11223c] px-3 py-2 text-[11px] text-[#dbeafe]",children:(0,a.jsx)("p",{children:"Fotoğraf veya PDF ekleyerek teslim tutanağını sisteme kaydedin. Plaka ve personel adı zorunludur."})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:C,children:["Plaka",(0,a.jsx)("span",{className:"".concat(T," ml-2 px-2 py-0.5 text-[10px] font-semibold"),children:"Zorunlu"})]}),(0,a.jsx)("input",{className:D,placeholder:"34 ABC 123",value:eL.plate,onChange:e=>eJ(t=>({...t,plate:e.target.value})),onBlur:e=>eJ(t=>({...t,plate:e.target.value.trim().toUpperCase()}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:C,children:["Personel Adı",(0,a.jsx)("span",{className:"".concat(T," ml-2 px-2 py-0.5 text-[10px] font-semibold"),children:"Zorunlu"})]}),(0,a.jsx)("input",{className:D,placeholder:"Ad Soyad",value:eL.personName,onChange:e=>eJ(t=>({...t,personName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"G\xf6rev / Departman"}),(0,a.jsx)("input",{className:D,placeholder:"Depo Sorumlusu",value:eL.personTitle,onChange:e=>eJ(t=>({...t,personTitle:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Ara\xe7 Marka"}),(0,a.jsx)("input",{className:D,placeholder:"\xd6rn. Ford",value:eL.vehicleMake,onChange:e=>eJ(t=>({...t,vehicleMake:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Ara\xe7 Model"}),(0,a.jsx)("input",{className:D,placeholder:"\xd6rn. Transit",value:eL.vehicleModel,onChange:e=>eJ(t=>({...t,vehicleModel:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Kilometre"}),(0,a.jsx)("input",{className:D,placeholder:"\xd6rn. 125000",value:eL.vehicleKm,onChange:e=>eJ(t=>({...t,vehicleKm:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Beklenen Teslim"}),(0,a.jsx)("input",{type:"date",className:D,value:eL.expectedReturnDate,onChange:e=>eJ(t=>({...t,expectedReturnDate:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Zimmet Tarihi"}),(0,a.jsx)("input",{type:"date",className:D,value:eL.assignmentDate,onChange:e=>eJ(t=>({...t,assignmentDate:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"A\xe7ıklama"}),(0,a.jsx)("textarea",{className:"".concat(D," min-h-[90px]"),placeholder:"Teslim şartları, ara\xe7 \xfczerinde bulunan ekipmanlar vb.",value:eL.description,onChange:e=>eJ(t=>({...t,description:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Fotoğraf / Belge"}),(0,a.jsx)("input",{type:"file",accept:"image/*,application/pdf",multiple:!0,className:"block w-full cursor-pointer rounded-lg border border-[#1E3A8A]/40 bg-[#0B1220] px-3 py-2 text-sm text-[#e2e8f0] file:mr-3 file:rounded-md file:border-0 file:bg-[#2563EB]/30 file:px-3 file:py-1 file:text-[#dbeafe] hover:file:bg-[#2563EB]/40 focus:border-[#3B82F6] focus:outline-none focus:ring-1 focus:ring-[#3B82F6]/40",onChange:e=>{let t=e.target.files?Array.from(e.target.files):[];eJ(e=>({...e,files:t}))}},eq),eL.files.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2 rounded-lg border border-slate-700/60 bg-slate-900/60 p-3",children:eL.files.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-600 bg-slate-800/80 px-3 py-1 text-xs text-slate-100",children:[(0,a.jsx)("span",{className:"max-w-[160px] truncate",children:e.name}),(0,a.jsx)("button",{type:"button",onClick:()=>li(t),className:"rounded-full border border-slate-500/60 px-2 text-[10px] text-slate-200 transition hover:border-rose-400/60 hover:text-rose-200",children:"Sil"})]},"".concat(e.name,"-").concat(t)))}):(0,a.jsx)("p",{className:"text-[11px] text-slate-500",children:"En fazla 5 MB boyutunda g\xf6rsel veya PDF se\xe7ebilirsiniz."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:D,placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)})]}),eU?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:eU}):null,e$?(0,a.jsx)("p",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:e$}):null,(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,a.jsx)("button",{type:"button",className:B,onClick:()=>{eJ(P()),eQ(Date.now())},children:"Formu Temizle"}),(0,a.jsx)("button",{type:"submit",disabled:eV,className:A,children:eV?"Kaydediliyor...":"Zimmet Kaydet"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Zimmet Kayıtları"}),(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[eH.length," kayıt"]})]}),e3?(0,a.jsx)("p",{className:"rounded-lg border border-sky-400/30 bg-sky-500/10 p-4 text-sm text-sky-100",children:e3}):e0?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Zimmet kayıtları y\xfckleniyor..."}):0===eH.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Hen\xfcz zimmet kaydı eklemediniz."}):(0,a.jsx)("div",{className:"space-y-3",children:eH.map(e=>{let t=k(e.expectedReturnDate),l=y(e.createdAt),s=y(e.assignmentDate),r=y(e.expectedReturnDate);return(0,a.jsxs)("article",{role:"button",tabIndex:0,onClick:()=>lm(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),lm(e))},className:"cursor-pointer rounded-xl border p-5 shadow-sm shadow-slate-950/20 transition hover:-translate-y-[2px] hover:shadow-slate-900/40 focus:outline-none focus:ring-2 focus:ring-sky-400/60 ".concat(t.cardClass),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-white",children:e.personName}),e.personTitle?(0,a.jsx)("p",{className:"text-xs text-slate-300",children:e.personTitle}):null,(0,a.jsx)("p",{className:"mt-3 text-[10px] uppercase tracking-[0.3em] text-slate-500",children:"Plaka"}),(0,a.jsx)("p",{className:"text-sm text-white",children:e.plate}),e.vehicleMake||e.vehicleModel||e.vehicleKm?(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-300",children:["Ara\xe7: ",[e.vehicleMake,e.vehicleModel].filter(Boolean).join(" ")||"Bilgi yok",e.vehicleKm?" • ".concat(e.vehicleKm):""]}):null]}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] ".concat(t.badgeClass),children:t.label})]}),(0,a.jsxs)("div",{className:"mt-4 grid gap-3 text-[11px] text-slate-400 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block uppercase tracking-[0.3em] text-slate-500",children:"Zimmet Tarihi"}),(0,a.jsx)("span",{className:"mt-1 block text-sm text-white",children:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block uppercase tracking-[0.3em] text-slate-500",children:"Beklenen Teslim"}),(0,a.jsx)("span",{className:"mt-1 block text-sm text-white",children:r})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"block uppercase tracking-[0.3em] text-slate-500",children:"Kaydedildi"}),(0,a.jsx)("span",{className:"mt-1 block text-sm text-white",children:l})]})]}),e.description?(0,a.jsx)("p",{className:"mt-3 rounded-lg border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-200",children:e.description}):null,e.attachments.length>0?(0,a.jsx)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:e.attachments.map(e=>{let t=j(e.size);return(0,a.jsxs)("figure",{onClick:t=>{var l;t.stopPropagation(),tx({name:e.name,preview:e.preview,mimeType:null!==(l=e.mimeType)&&void 0!==l?l:null})},onKeyDown:t=>{if("Enter"===t.key||" "===t.key){var l;t.preventDefault(),t.stopPropagation(),tx({name:e.name,preview:e.preview,mimeType:null!==(l=e.mimeType)&&void 0!==l?l:null})}},tabIndex:0,className:"group relative flex flex-col overflow-hidden rounded-lg border border-slate-700 bg-slate-900/80",children:[e.preview.startsWith("data:application/pdf")?(0,a.jsx)("div",{className:"flex h-28 w-full items-center justify-center bg-slate-800 text-xs text-slate-200",children:"PDF \xd6N İZLEME"}):(0,a.jsx)("img",{src:e.preview,alt:e.name,className:"h-28 w-full object-cover"}),(0,a.jsxs)("figcaption",{className:"flex items-center justify-between gap-3 px-3 py-2 text-[11px] text-slate-300",children:[(0,a.jsx)("span",{className:"truncate",children:e.name}),t?(0,a.jsx)("span",{className:"text-[10px] text-slate-500",children:t}):null]}),(0,a.jsx)("a",{href:e.preview,download:e.name,onClick:e=>e.stopPropagation(),className:"absolute right-2 top-2 rounded-full border border-slate-500/60 bg-slate-900/80 px-2 py-0.5 text-[10px] text-slate-200 opacity-0 transition group-hover:opacity-100",children:"İndir"})]},e.id)})}):null,(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),lm(e)},className:"inline-flex items-center rounded-lg border border-sky-400/50 bg-sky-500/15 px-3 py-1.5 text-xs font-medium text-sky-100 transition hover:border-sky-300/70 hover:bg-sky-500/25",children:"Detay / D\xfczenle"}),(0,a.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),lx(e)},disabled:tm===e.id,className:"inline-flex items-center rounded-lg border border-rose-400/50 bg-rose-500/15 px-3 py-1.5 text-xs font-medium text-rose-100 transition hover:border-rose-300/70 hover:bg-rose-500/25 disabled:cursor-not-allowed disabled:opacity-60",children:tm===e.id?"Siliniyor...":"Sil"})]})]},e.id)})})]})]})]});if("damages"===ec)return(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Hasar Takibi"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Hasar kayıtlarını oluşturun ve g\xf6rseller y\xfckleyin. Kayıtlar yalnızca bu oturumda saklanır."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[(0,a.jsxs)("form",{className:"flex flex-col gap-3 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",onSubmit:lh,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Hasar Kaydı Oluştur"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Plaka, tarih ve hasar detaylarını girin."})]}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Plaka"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",placeholder:"34 ABC 123",value:tp.plate,onChange:e=>th(t=>({...t,plate:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Başlık"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",placeholder:"\xd6rn. Sağ kapı \xe7izik",value:tp.title,onChange:e=>th(t=>({...t,title:e.target.value}))}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Şiddet"}),(0,a.jsx)("select",{className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",value:tp.severity,onChange:e=>th(t=>({...t,severity:e.target.value})),children:x.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Tarih"}),(0,a.jsx)("input",{type:"date",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",value:tp.occurredAt,onChange:e=>th(t=>({...t,occurredAt:e.target.value}))})]})]}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"A\xe7ıklama"}),(0,a.jsx)("textarea",{className:"min-h-[90px] rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",placeholder:"Hasar detaylarını girin",value:tp.description,onChange:e=>th(t=>({...t,description:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Fotoğraf / G\xf6rsel"}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"block w-full cursor-pointer rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-rose-500/20 file:px-3 file:py-1 file:text-rose-100 hover:file:bg-rose-500/30",onChange:e=>{let t=e.target.files?Array.from(e.target.files):[];th(e=>({...e,files:t}))}},tw),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-rose-400 focus:outline-none",placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)}),tf?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:tf}):null,ty?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:ty}):null,(0,a.jsx)("button",{type:"submit",disabled:tN,className:"inline-flex items-center justify-center rounded-lg border border-rose-400/40 bg-rose-500/20 px-4 py-2 text-sm font-medium text-rose-100 transition hover:border-rose-300/70 hover:bg-rose-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:tN?"Kaydediliyor...":"Hasar Kaydet"})]}),(0,a.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Hasar Kayıtları"}),(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[tb.length," kayıt"]})]}),tC?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 p-4 text-sm text-rose-100",children:tC}):tS?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Hasar kayıtları y\xfckleniyor..."}):0===tb.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Hen\xfcz hasar kaydı eklemediniz."}):(0,a.jsx)("div",{className:"space-y-3",children:tb.map(e=>(0,a.jsxs)("article",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 shadow-sm shadow-slate-950/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:e.plate}),(0,a.jsx)("span",{children:new Date(e.occurredAt).toLocaleDateString("tr-TR")})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:e.title}),e.description?(0,a.jsx)("p",{className:"text-xs text-slate-300",children:e.description}):null]}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-[10px] font-semibold uppercase tracking-[0.25em] ".concat(g("Ağır"===e.severity?"critical":"Orta"===e.severity?"warning":"ok")),children:e.severity})]}),e.attachments.length>0?(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-3",children:e.attachments.map(e=>(0,a.jsxs)("figure",{className:"flex flex-col overflow-hidden rounded-lg border border-slate-800 bg-slate-900/80",children:[(0,a.jsx)("img",{src:e.preview,alt:e.name,className:"h-24 w-32 object-cover"}),(0,a.jsx)("figcaption",{className:"truncate px-2 py-1 text-[11px] text-slate-300",children:e.name})]},e.id))}):null]},e.id))})]})]})]});if("expenses"===ec)return(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Masraf Y\xf6netimi"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Masrafları kategori ve tutara g\xf6re kaydedin. Fiş veya fatura g\xf6rsellerini ekleyin."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[(0,a.jsxs)("form",{className:"flex flex-col gap-3 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",onSubmit:lb,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Masraf Ekle"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Plaka, kategori ve tutarı girin."})]}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Plaka"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",placeholder:"34 ABC 123",value:tA.plate,onChange:e=>tB(t=>({...t,plate:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kategori"}),(0,a.jsx)("select",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",value:tA.category,onChange:e=>tB(t=>({...t,category:e.target.value})),children:m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Tutar"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",placeholder:"\xd6rn. 2500",value:tA.amount,onChange:e=>tB(t=>({...t,amount:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Tarih"}),(0,a.jsx)("input",{type:"date",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",value:tA.createdAt,onChange:e=>tB(t=>({...t,createdAt:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"A\xe7ıklama"}),(0,a.jsx)("textarea",{className:"min-h-[90px] rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",placeholder:"Masraf detaylarını girin",value:tA.description,onChange:e=>tB(t=>({...t,description:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Fiş / Fatura"}),(0,a.jsx)("input",{type:"file",accept:"image/*,.pdf",multiple:!0,className:"block w-full cursor-pointer rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-indigo-500/20 file:px-3 file:py-1 file:text-indigo-100 hover:file:bg-indigo-500/30",onChange:e=>{let t=e.target.files?Array.from(e.target.files):[];tB(e=>({...e,files:t}))}},tR),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none",placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)}),tP?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:tP}):null,tK?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:tK}):null,(0,a.jsx)("button",{type:"submit",disabled:tF,className:"inline-flex items-center justify-center rounded-lg border border-indigo-400/40 bg-indigo-500/20 px-4 py-2 text-sm font-medium text-indigo-100 transition hover:border-indigo-300/70 hover:bg-indigo-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:tF?"Kaydediliyor...":"Masraf Kaydet"})]}),(0,a.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Masraf Kayıtları"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[tM.length," kayıt"]}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border border-emerald-400/40 bg-emerald-500/10 px-2 py-0.5 text-xs text-emerald-100",children:v(lg)})]})]}),tH?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 p-4 text-sm text-rose-100",children:tH}):tL?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Masraf kayıtları y\xfckleniyor..."}):0===tM.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Hen\xfcz masraf kaydı eklemediniz."}):(0,a.jsx)("div",{className:"space-y-3",children:tM.map(e=>(0,a.jsxs)("article",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 shadow-sm shadow-slate-950/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border border-indigo-400/40 bg-indigo-500/20 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.25em] text-indigo-100",children:e.category})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between text-sm text-slate-200",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:e.plate}),(0,a.jsx)("span",{children:v(e.amount)})]}),e.description?(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-300",children:e.description}):null,e.attachments.length>0?(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-3",children:e.attachments.map(e=>(0,a.jsxs)("figure",{className:"flex flex-col overflow-hidden rounded-lg border border-slate-800 bg-slate-900/80",children:[e.preview.startsWith("data:application/pdf")?(0,a.jsx)("div",{className:"flex h-24 w-32 items-center justify-center bg-slate-800 text-xs text-slate-200",children:"PDF"}):(0,a.jsx)("img",{src:e.preview,alt:e.name,className:"h-24 w-32 object-cover"}),(0,a.jsx)("figcaption",{className:"truncate px-2 py-1 text-[11px] text-slate-300",children:e.name})]},e.id))}):null]},e.id))})]})]})]});if("fuels"===ec){let e=new Intl.NumberFormat("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:1}).format(ly);return(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Yakıt Takibi"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Ara\xe7ların yakıt alımlarını litre, tutar ve kilometre bilgileriyle kaydedin."})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)]",children:[(0,a.jsxs)("form",{className:"flex flex-col gap-3 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",onSubmit:lf,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yakıt Kaydı Ekle"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Plaka, litre ve \xf6denen tutarı girin."})]}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Plaka"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"34 ABC 123",value:tU.plate,onChange:e=>tG(t=>({...t,plate:e.target.value}))}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Tarih"}),(0,a.jsx)("input",{type:"date",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",value:tU.refuelDate,onChange:e=>tG(t=>({...t,refuelDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Litre"}),(0,a.jsx)("input",{className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"\xd6rn. 55",value:tU.liters,onChange:e=>tG(t=>({...t,liters:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Tutar"}),(0,a.jsx)("input",{className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"\xd6rn. 3200",value:tU.amount,onChange:e=>tG(t=>({...t,amount:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kilometre"}),(0,a.jsx)("input",{className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"Opsiyonel",value:tU.odometer,onChange:e=>tG(t=>({...t,odometer:e.target.value}))})]})]}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Not"}),(0,a.jsx)("textarea",{className:"min-h-[80px] rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"Doldurulan istasyon, yakıt tipi vb.",value:tU.note,onChange:e=>tG(t=>({...t,note:e.target.value}))}),(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-amber-400 focus:outline-none",placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)}),tV?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:tV}):null,tq?(0,a.jsx)("p",{className:"mt-2 rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:tq}):null,(0,a.jsx)("button",{type:"submit",disabled:t0,className:"inline-flex items-center justify-center rounded-lg border border-amber-400/40 bg-amber-500/20 px-4 py-2 text-sm font-medium text-amber-100 transition hover:border-amber-300/70 hover:bg-amber-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:t0?"Kaydediliyor...":"Yakıt Kaydet"})]}),(0,a.jsxs)("div",{className:"space-y-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yakıt Kayıtları"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-slate-700 bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[t$.length," kayıt"]}),(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-amber-400/40 bg-amber-500/10 px-2 py-0.5 text-xs text-amber-100",children:[e," L"]}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full border border-emerald-400/40 bg-emerald-500/10 px-2 py-0.5 text-xs text-emerald-100",children:v(lv)})]})]}),t1?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 p-4 text-sm text-rose-100",children:t1}):t3?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Yakıt kayıtları y\xfckleniyor..."}):0===t$.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Hen\xfcz yakıt kaydı eklemediniz."}):(0,a.jsx)("div",{className:"space-y-3",children:t$.map(e=>(0,a.jsxs)("article",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 shadow-sm shadow-slate-950/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[(0,a.jsx)("span",{children:y(e.refuelDate)}),(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full border border-amber-400/40 bg-amber-500/10 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-[0.25em] text-amber-100",children:[e.liters.toFixed(1)," L"]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between text-sm text-slate-200",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:e.plate}),(0,a.jsx)("span",{children:v(e.amount)})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs text-slate-400",children:[(0,a.jsx)("span",{children:e.odometer?"".concat(e.odometer.toLocaleString("tr-TR")," km"):"KM belirtilmedi"}),(0,a.jsx)("span",{children:e.unitPrice?"".concat(e.unitPrice.toFixed(2)," TL/L"):"-"})]}),e.note?(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-300",children:e.note}):null]},e.id))})]})]})]})}return(0,a.jsxs)("section",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Belge Takip Panosu"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"\xd6n\xfcm\xfczdeki 60 g\xfcn i\xe7inde s\xfcresi dolacak belgeler"})]}),(0,a.jsx)("span",{className:"rounded bg-slate-800 px-3 py-1 text-sm text-slate-300",children:ee?"Y\xfckleniyor...":"".concat(q.length," belge")})]}),(0,a.jsxs)("form",{className:"grid gap-4 rounded-2xl border border-slate-800 bg-slate-900/80 p-5 md:grid-cols-2",onSubmit:e=>lr(e,eA,eE,ez,eY,()=>eB({vehicleId:"",doc_type:eA.doc_type,valid_from:"",valid_to:"",note:""}),eF),children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:eF?"Belge D\xfczenle":"Belge Ekle"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:eF?"Mevcut belgeyi g\xfcncelleyebilirsiniz. Ara\xe7 değiştirilemez.":"Ara\xe7 se\xe7in ve yeni belge kaydı oluşturun."})]}),eF?(0,a.jsx)("button",{type:"button",onClick:ld,className:B,children:"D\xfczenlemeyi İptal Et"}):null]}),eF&&eR?(0,a.jsx)("div",{className:"rounded-lg border border-[#1E3A8A]/40 bg-[#0f1a2d]/80 px-3 py-2 text-xs text-[#cbd5f5]",children:"".concat(eR.plate," • ").concat(eR.docType," belgesini d\xfczenliyorsunuz.")}):null]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Ara\xe7"}),(0,a.jsxs)("select",{className:"".concat(D," ").concat(eF?"cursor-not-allowed opacity-60":""),value:eA.vehicleId,onChange:e=>eB(t=>({...t,vehicleId:e.target.value})),disabled:null!==eF,children:[(0,a.jsx)("option",{value:"",children:"Ara\xe7 se\xe7in"}),es.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.plate," (",[e.make,e.model].filter(Boolean).join(" ")||"Model belirtilmedi",")"]},e.id))]}),eF?(0,a.jsx)("span",{className:"text-[11px] text-slate-500",children:"Belge d\xfczenlerken ara\xe7 değiştirilemez."}):null]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Belge T\xfcr\xfc"}),(0,a.jsx)("select",{className:"".concat(D," text-[#e2e8f0]"),value:eA.doc_type,onChange:e=>eB(t=>({...t,doc_type:e.target.value})),children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Başlangı\xe7 Tarihi"}),(0,a.jsx)("input",{type:"date",className:D,value:eA.valid_from,onChange:e=>eB(t=>({...t,valid_from:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Bitiş Tarihi"}),(0,a.jsx)("input",{type:"date",className:D,value:eA.valid_to,onChange:e=>eB(t=>({...t,valid_to:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:col-span-2",children:[(0,a.jsx)("label",{className:C,children:"Not"}),(0,a.jsx)("textarea",{className:"".concat(D," min-h-[80px]"),placeholder:"İsteğe bağlı a\xe7ıklama",value:eA.note,onChange:e=>eB(t=>({...t,note:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:C,children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:D,placeholder:"Y\xf6netici şifresi",type:"password",value:em,onChange:e=>eu(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[eP?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:eP}):null,eK?(0,a.jsx)("p",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:eK}):null,(0,a.jsx)("button",{type:"submit",disabled:eM,className:A,children:eM?eF?"Belge g\xfcncelleniyor...":"Belge kaydediliyor...":eF?"Belge G\xfcncelle":"Belge Kaydet"})]})]}),el?(0,a.jsx)("p",{className:"rounded-lg border border-rose-500/40 bg-rose-900/40 p-4 text-sm text-rose-100",children:el}):null,(0,a.jsx)("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:ee?(0,a.jsx)("p",{className:"rounded-lg border border-slate-700 bg-slate-800/70 p-4 text-slate-300",children:"Belgeler y\xfckleniyor..."}):0===q.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-700 bg-slate-800/70 p-4 text-slate-300",children:"\xd6n\xfcm\xfczdeki 60 g\xfcn i\xe7inde s\xfcresi dolacak belge bulunmuyor."}):q.map(e=>{var t,l,s;return(0,a.jsxs)("article",{className:"rounded-xl border shadow-lg shadow-slate-900/40 transition hover:-translate-y-1 hover:shadow-slate-800/60 ".concat(b(e.status)),children:[(0,a.jsxs)("div",{className:"space-y-2 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm uppercase tracking-wide text-white/70",children:"Plaka"}),(0,a.jsx)("span",{className:"text-lg font-semibold text-white",children:e.plate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm uppercase tracking-wide text-white/70",children:"Belge T\xfcr\xfc"}),(0,a.jsx)("h3",{className:"text-xl font-semibold capitalize text-white",children:c(e.doc_type)})]}),e.valid_from?(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-white/70",children:[(0,a.jsx)("span",{children:"Ge\xe7erlilik Başlangıcı"}),(0,a.jsx)("span",{children:new Date(e.valid_from).toLocaleDateString("tr-TR")})]}):null,(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-white/80",children:[(0,a.jsx)("span",{children:"Bitiş Tarihi"}),(0,a.jsx)("span",{children:new Date(e.valid_to).toLocaleDateString("tr-TR")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium text-white",children:[(0,a.jsx)("span",{children:"Kalan G\xfcn"}),(0,a.jsx)("span",{children:null!==(t=e.days_left)&&void 0!==t?t:"-"})]}),e.note?(0,a.jsxs)("p",{className:"text-xs text-white/70",children:["Not: ",e.note]}):null,(0,a.jsxs)("div",{className:"text-xs text-white/70",children:["Sorumlu: ",null!==(l=e.responsible_email)&&void 0!==l?l:"Tanımlı değil"]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2 px-5 pb-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>lo(e),className:"".concat(B," px-3 py-1.5 text-xs"),children:"D\xfczenle"})})]},null!==(s=e.id)&&void 0!==s?s:e.doc_id)})})]})})(),lN=null!==(Z=null==e8?void 0:null===(l=e8.attachments)||void 0===l?void 0:l.filter(_))&&void 0!==Z?Z:[],lk=null!==(U=null==e8?void 0:null===(o=e8.attachments)||void 0===o?void 0:o.filter(e=>!_(e)))&&void 0!==U?U:[],lw=e=>(0,a.jsxs)("figure",{role:"button",tabIndex:0,onClick:()=>{var t;return tx({name:e.name,preview:e.preview,mimeType:null!==(t=e.mimeType)&&void 0!==t?t:null})},onKeyDown:t=>{if("Enter"===t.key||" "===t.key){var l;t.preventDefault(),tx({name:e.name,preview:e.preview,mimeType:null!==(l=e.mimeType)&&void 0!==l?l:null})}},className:"group relative cursor-zoom-in overflow-hidden rounded-xl border border-slate-800 bg-slate-900/80 outline-none transition hover:border-sky-500/60 focus:border-sky-500/60",children:[e.preview.startsWith("data:application/pdf")?(0,a.jsx)("div",{className:"flex h-48 w-full items-center justify-center bg-slate-800 text-sm text-slate-200",children:"PDF \xd6nizleme"}):(0,a.jsx)("img",{src:e.preview,alt:e.name,className:"h-48 w-full object-cover transition group-hover:scale-[1.01]"}),(0,a.jsxs)("figcaption",{className:"flex items-center justify-between gap-3 px-3 py-2 text-xs text-slate-300",children:[(0,a.jsx)("span",{className:"truncate",children:e.name}),e.size?(0,a.jsx)("span",{className:"text-[10px] text-slate-500",children:j(e.size)}):null]}),(0,a.jsx)("span",{className:"absolute right-3 top-3 rounded-full border border-slate-500/60 bg-slate-900/80 px-3 py-1 text-[10px] text-slate-100 opacity-0 transition group-hover:opacity-100",children:"G\xf6r\xfcnt\xfcle"})]},e.id);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"space-y-8 text-[#fde7cf]",children:[(0,a.jsx)("nav",{className:"flex flex-wrap gap-2 rounded-full border border-[#f37b1f]/35 bg-[#1b120a]/90 p-1 text-sm shadow-md shadow-[#120b06]/40",children:n.map(e=>{let t=ec===e.id;return(0,a.jsx)("button",{type:"button",onClick:()=>t8(e.id),className:"rounded-full px-4 py-2 transition ".concat(t?"bg-[#f37b1f] text-[#23140c] shadow-lg shadow-[#f37b1f]/40":"text-[#f3b375] hover:bg-[#2b1a10] hover:text-[#ffe2c3]"),children:e.label},e.id)})}),lj]}),e1&&e8?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 px-4 py-8",children:(0,a.jsxs)("div",{className:"relative max-h-[90vh] w-full max-w-4xl overflow-y-auto rounded-2xl border border-slate-800 bg-slate-900 shadow-2xl shadow-slate-950/60",children:[(0,a.jsx)("button",{type:"button",onClick:lu,className:"absolute right-4 top-4 rounded-full border border-slate-600/60 bg-slate-900/80 px-3 py-1 text-xs text-slate-200 transition hover:border-rose-400/60 hover:text-rose-200",children:"Kapat"}),(0,a.jsxs)("div",{className:"space-y-6 p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-500",children:"Zimmet"}),(0,a.jsx)("h3",{className:"text-2xl font-semibold text-white",children:e8.plate}),(0,a.jsxs)("p",{className:"text-sm text-slate-300",children:[e8.personName,e8.personTitle?" • ".concat(e8.personTitle):""]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{e9(e=>!e),tr(null),tn(null),tt(z(e8)),ta(Date.now())},className:"inline-flex items-center rounded-lg border border-sky-400/60 bg-sky-500/15 px-4 py-2 text-sm text-sky-100 transition hover:border-sky-300/80 hover:bg-sky-500/25",children:e6?"D\xfczenlemeyi Kapat":"D\xfczenle"}),(0,a.jsx)("a",{href:null!==(G=null===(N=e8.attachments[0])||void 0===N?void 0:N.preview)&&void 0!==G?G:"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center rounded-lg border px-4 py-2 text-sm transition ".concat(e8.attachments.length>0?"border-emerald-400/50 bg-emerald-500/20 text-emerald-100 hover:border-emerald-300/70 hover:bg-emerald-500/30":"pointer-events-none border-slate-600/60 bg-slate-800/60 text-slate-400"),children:"İlk G\xf6rseli A\xe7"})]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Kaydedilme: ".concat(y(e8.createdAt)," • Zimmet Tarihi: ").concat(y(e8.assignmentDate))})]}),ti?(0,a.jsx)("p",{className:"rounded-lg border border-emerald-400/30 bg-emerald-500/15 px-4 py-2 text-xs text-emerald-100",children:ti}):null,e6?(0,a.jsxs)("form",{className:"space-y-4",onSubmit:lp,children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Plaka"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.plate,onChange:e=>tt(t=>({...t,plate:e.target.value})),onBlur:e=>tt(t=>({...t,plate:e.target.value.trim().toUpperCase()}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Personel Adı"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.personName,onChange:e=>tt(t=>({...t,personName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"G\xf6rev / Departman"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.personTitle,onChange:e=>tt(t=>({...t,personTitle:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Ara\xe7 Marka"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.vehicleMake,onChange:e=>tt(t=>({...t,vehicleMake:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Ara\xe7 Model"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.vehicleModel,onChange:e=>tt(t=>({...t,vehicleModel:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Kilometre"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.vehicleKm,onChange:e=>tt(t=>({...t,vehicleKm:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Beklenen Teslim"}),(0,a.jsx)("input",{type:"date",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.expectedReturnDate,onChange:e=>tt(t=>({...t,expectedReturnDate:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Zimmet Tarihi"}),(0,a.jsx)("input",{type:"date",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.assignmentDate,onChange:e=>tt(t=>({...t,assignmentDate:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"A\xe7ıklama"}),(0,a.jsx)("textarea",{className:"min-h-[90px] rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",value:te.description,onChange:e=>tt(t=>({...t,description:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Yeni Fotoğraf / Belge"}),(0,a.jsx)("input",{type:"file",accept:"image/*,application/pdf",multiple:!0,className:"block w-full cursor-pointer rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-sky-500/20 file:px-3 file:py-1 file:text-sky-100 hover:file:bg-sky-500/30",onChange:e=>{let t=e.target.files?Array.from(e.target.files):[];tt(e=>({...e,files:t}))}},tl),te.files.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2 rounded-lg border border-slate-700/60 bg-slate-900/60 p-3",children:te.files.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-md border border-slate-600 bg-slate-800/80 px-3 py-1 text-xs text-slate-100",children:[(0,a.jsx)("span",{className:"max-w-[160px] truncate",children:e.name}),(0,a.jsx)("button",{type:"button",onClick:()=>ln(t),className:"rounded-full border border-slate-500/60 px-2 text-[10px] text-slate-200 transition hover:border-rose-400/60 hover:text-rose-200",children:"Sil"})]},"".concat(e.name,"-").concat(t)))}):(0,a.jsx)("p",{className:"text-[11px] text-slate-500",children:"Mevcut ekler korunur. Buradan yeni g\xf6rsel veya PDF ekleyebilirsiniz."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.25em] text-slate-400",children:"Y\xf6netici Şifresi"}),(0,a.jsx)("input",{className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white focus:border-sky-400 focus:outline-none",type:"password",value:em,onChange:e=>eu(e.target.value)})]}),ts?(0,a.jsx)("p",{className:"rounded-lg border border-rose-400/30 bg-rose-500/10 px-3 py-2 text-xs text-rose-100",children:ts}):null,(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{e9(!1),tr(null),tn(null)},className:"rounded-lg border border-slate-700/70 bg-slate-900/70 px-4 py-2 text-xs text-slate-200 transition hover:border-slate-500/60 hover:text-white",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:td,className:"inline-flex items-center justify-center rounded-lg border border-emerald-400/40 bg-emerald-500/20 px-4 py-2 text-sm font-medium text-emerald-100 transition hover:border-emerald-300/70 hover:bg-emerald-500/30 disabled:cursor-not-allowed disabled:opacity-60",children:td?"G\xfcncelleniyor...":"Değişiklikleri Kaydet"})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Teslim Bilgisi"}),(0,a.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Zimmet Tarihi: "}),y(e8.assignmentDate)]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Beklenen Teslim: "}),y(e8.expectedReturnDate)]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Durum: "}),k(e8.expectedReturnDate).label]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Sorumlu"}),(0,a.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Personel: "}),e8.personName]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"G\xf6rev: "}),null!==($=e8.personTitle)&&void 0!==$?$:"-"]})]})]}),(e8.vehicleMake||e8.vehicleModel||e8.vehicleKm)&&(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Ara\xe7 Bilgisi"}),(0,a.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-slate-200",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Marka: "}),null!==(W=e8.vehicleMake)&&void 0!==W?W:"-"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Model: "}),null!==(V=e8.vehicleModel)&&void 0!==V?V:"-"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Kilometre: "}),null!==(X=e8.vehicleKm)&&void 0!==X?X:"-"]})]})]})]}),e8.description?(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"A\xe7ıklama"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:e8.description})]}):null,(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-white",children:"Ekler"}),(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:[e8.attachments.length," adet ek"]})]}),lN.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Fotoğraflar"}),(0,a.jsxs)("span",{className:"text-[11px] text-slate-400",children:[lN.length," adet fotoğraf"]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:lN.map(e=>lw(e))})]}):null,lk.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Evraklar"}),(0,a.jsxs)("span",{className:"text-[11px] text-slate-400",children:[lk.length," adet evrak"]})]}),(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:lk.map(e=>lw(e))})]}):null,0===lN.length&&0===lk.length?(0,a.jsx)("p",{className:"rounded-lg border border-slate-800 bg-slate-900/70 p-4 text-sm text-slate-300",children:"Bu kayda ait g\xf6rsel veya evrak eklenmemiş."}):null]})]})]})]})}):null,tc?(0,a.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-950/90 px-4 py-8",onClick:()=>tx(null),children:(0,a.jsxs)("div",{className:"relative w-full max-w-4xl rounded-2xl border border-slate-800 bg-slate-900/95 p-6 shadow-2xl shadow-slate-950/70",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Dosya \xd6nizleme"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:tc.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("a",{href:tc.preview,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border border-sky-400/60 bg-sky-500/15 px-3 py-1.5 text-xs text-sky-100 transition hover:border-sky-300/80 hover:bg-sky-500/25",children:"Yeni Sekmede A\xe7"}),(0,a.jsx)("a",{href:tc.preview,download:tc.name,className:"rounded-lg border border-emerald-400/60 bg-emerald-500/15 px-3 py-1.5 text-xs text-emerald-100 transition hover:border-emerald-300/80 hover:bg-emerald-500/25",children:"İndir"}),(0,a.jsx)("button",{type:"button",onClick:()=>tx(null),className:"rounded-full border border-slate-600/60 bg-slate-900/80 px-3 py-1 text-xs text-slate-200 transition hover:border-rose-400/60 hover:text-rose-200",children:"Kapat"})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(null===(w=tc.mimeType)||void 0===w?void 0:w.includes("pdf"))?(0,a.jsx)("iframe",{title:tc.name,src:tc.preview,className:"h-[70vh] w-full rounded-xl border border-slate-800 bg-white"}):(0,a.jsx)("img",{src:tc.preview,alt:tc.name,className:"max-h-[75vh] w-full rounded-xl border border-slate-800 bg-slate-950 object-contain"})})]})}):null]})}},6264:function(e,t,l){"use strict";l.d(t,{J:function(){return s}});let a=(l(357).env.NEXT_PUBLIC_API_URL||"").replace(/\/$/,""),s=e=>"".concat(a).concat(e.startsWith("/")?e:"/".concat(e))}},function(e){e.O(0,[349,971,23,744],function(){return e(e.s=4561)}),_N_E=e.O()}]);